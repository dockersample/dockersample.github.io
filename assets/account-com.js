"use strict";function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(i){return void c(i)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a){function b(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toGMTString();document.cookie=a+"="+b+"; "+e}var c=this,d=apower,e=d.tr;apower.support={urls:null,recommended:null,loadURLs:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.post("get-product-urls");case 2:a=c.sent,b=a.ok,d=a.data,b&&(this.urls=d.urls);case 6:case"end":return c.stop()}},c,this)}));return a}(),post:a.req.overwrite(function(a,b){var c=apower,d=c.user,e=c.lang,f=c.license,g="/api/account",h=apower.getSupportDomain()+g;return b.data=b.data||{},b.withCredentials=!0,"object"===_typeof(b.data)&&(b.data.action=a,b.data.language=e,f.productName&&(b.data.product_name=f.productName),d.identityToken?b.data.identity_token=d.identityToken:d.info&&d.info.identity_token&&(b.data.identity_token=d.info.identity_token)),{url:h,options:b}},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(a,d){var e,f=a.ok,g=a.data;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=g&&g.error_code?g.error_code:null,f=f&&g&&1==g.status,g=g&&g.data?g.data:g,-99!=e){a.next=7;break}return a.next=6,apower.user.popupLoginWin();case 6:return a.abrupt("return",apower.support.post(d));case 7:return a.abrupt("return",{ok:f,data:g,status:e});case 8:case"end":return a.stop()}},b,c)}));return function(b,c){return a.apply(this,arguments)}}()).post,getFirstRecommendProduct:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.recommended){c.next=2;break}return c.abrupt("return",this.recommended);case 2:return c.next=4,this.post("get-recommend-product");case 4:if(a=c.sent,b=a.ok,d=a.data,!b){c.next=14;break}return e=d.recommend_product,e=e.filter(function(a){return!!a.product_name}),e.sort(function(a,b){return 1==b.topmost?1:-1}),c.abrupt("return",this.recommended=e[0]);case 14:return c.abrupt("return",null);case 15:case"end":return c.stop()}},c,this)}));return a}()},a.registerComponent("lightmv-header-nav",{template:'\n        <nav class="wrapper">\n            <a :href="getLightmvLink()" target="_blank" class="logo">\n                <span>LightMV</span>\n            </a>\n            <ul class="nav">\n                <li><a :href="getTemplatesLink()" target="_blank">Templates@@002485</a></li>\n                <li><a :href="getMyVideosLink()" target="_blank">My Videos@@002425</a></li>\n            </ul>\n            <header-lightmv-links></header-lightmv-links>\n            <header-account-entry></header-account-entry>\n            <div class="menu" title="Menu">\n                <i></i><i></i><i></i>\n            </div>\n        </nav>\n    ',getLightmvLink:function(){return apower.user.addTokenToURL(""+apower.getLightMvDomain())},getTemplatesLink:function(){return apower.user.addTokenToURL(apower.getLightMvDomain()+"/templates/")},getMyVideosLink:function(){return apower.user.addTokenToURL(apower.getLightMvDomain()+"/user/")}}),a.registerComponent("header-lightmv-links",{template:'\n        <div class="links">\n            <span f-if="lightmvVipInfo" class="coin" f-html="getCoiniText()"></span>\n            <a class="buy" @click="gotoBuy()">购买糖币@@002424</a>\n        </div>\n    ',lightmvVipInfo:null,onCreated:function(){apower.user.on("logined",this.getLightmvAccountInfo,this),apower.user.on("updateLightmvVipInfo",this.getLightmvAccountInfo,this);var b=a.store.get("lightmvAccountInfo")||a.store.get("account-data");b?this.getLightmvVipInfo():apower.user.isLogined()&&this.getLightmvAccountInfo()},getCoiniText:function(){return apower.tr("{0}糖币：{1} {2}{3}{4}个@@002432","<span>","</span>","<span>",""+(this.lightmvVipInfo&&this.lightmvVipInfo.mv_coin),"</span>")},getLightmvAccountInfo:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.req.post("https://apilightmv.aoscdn.com/api/sessions",{identity_token:apower.user.identityToken});case 2:b=d.sent,c=b.ok,e=b.data,e.data&&e.data.user&&(this.lightmvAccountInfo=e.data.user,a.store.set("lightmvAccountInfo",e.data.user),this.getLightmvVipInfo());case 6:case"end":return d.stop()}},d,this)}));return b}(),getLightmvVipInfo:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=a.store.get("lightmvAccountInfo"),d.next=3,a.req.get(a.useQuery("https://apilightmv.aoscdn.com/api/my/vip",{api_token:b.api_token}));case 3:c=d.sent,e=c.ok,f=c.data,f.data&&f.data.vip&&(this.lightmvVipInfo=f.data.vip,a.store.set("lightmvVipInfo",f.data.vip));case 7:case"end":return d.stop()}},d,this)}));return b}(),coin:function(){return this.lightmvVipInfo&&this.lightmvVipInfo.mv_coin},gotoBuy:function(){var a=apower,b=a.route;b["goto"]("/token")}}),a.registerComponent("header-account-entry","drop",{template:'\n		<div class="drop header-account-entry" @click="onClick">\n			<div class="header-account-entry-img-wrap" f-show="user.isLogined() || showportrait">\n                <img f-if="user.getAvatar()" :src="user.getAvatar()">\n                <span f-if="!user.getAvatar()" class=\'default-avatar\'></span>\n			</div>\n            <span class="header-account-wrap-name">{{user.getId() ? user.getName() : \'\'}}</span>\n			<div  f-hide="user.isLogined()"><icon type="user"></icon><span class="login">{Login@@001166}</span></div>\n			<div class="drop-menu header-account-menu" :class="menuClass" ref="menu">\n				<div class="ap-trangle"></div>\n				<div class="header-account-nav">\n					<div class="header-account-nav-top" f-if="!isLightMV" f-show="user.isLogined()">\n                        <div class="header-account-nav-avatar" f-if="user.getAvatar()"><img f-if="user.getAvatar()" :src="user.getAvatar()"></div>\n                        <span f-if="!user.getAvatar()" class=\'default-avatar\'></span>\n						<div class="header-account-nav-name">{{user.getName()}}</div>\n					</div>\n					<a class="header-account-nav-button" f-show="user.isLogined() && !user.inMyAccountDomain && !hideAccount" target="_blank" :href="getURL()">\n						<icon type="user"></icon>\n						{My account@@001167}\n                    </a>\n                    <a class="header-account-nav-button coin-button" f-if="isLightMV && lightmvVipInfo">\n                        <p class="coin" f-html="getCoiniText()"></p>\n                        <p class="buy" @click="gotoBuyToken()">购买糖币@@002424</p>\n                    </a>\n                    <a class="header-account-nav-button my-video" f-if="isLightMV" @click="gotoLightMvVideoList()">\n                        <icon type="video"></icon>\n                        我的视频@@002425\n                    </a>\n					<a class="header-account-nav-button" f-for="button of customButtons" :href="button.url" f-hide="!user.isLogined()">\n						<icon :type="button.icon"></icon>\n						{{button.text}}\n					</a>\n					<div class="header-account-nav-button header-account-nav-exit" f-show="user.isLogined()" @click="user.logout">\n						<icon type="exit"></icon>\n						{Exit@@001168}\n					</div>\n				</div>\n			</div>\n		</div>\n	',url:"/",customButtons:null,isLightMV:!1,hideAccount:!1,onCreated:function(){this.license=apower.license,this.user=apower.user,apower.user.syncLoginState=this.onLogined.bind(this),apower.user.syncLogoutState=this.onLogout.bind(this),this.hideAccount=apower.isLightMV&&apower.isAccount;var c=a.parseQuery(location.search),d=c.weixin_auto_login,e=c.code,f=(c.state,window.navigator.userAgent.toLowerCase()),g=f&&f.indexOf("micromessenger")>0;if(g&&!e){var h="wx1d396e446d0ecf21",i=encodeURIComponent("https://support.apowersoft.cn/api/account?action=weixin-oauth-jumper&callback="+encodeURIComponent(this.getUrlWithoutAuto())),j="login";window.location="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+h+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state="+j+"#wechat_redirect"}e&&a.ajax({url:"https://wechat.aoscdn.com/api/user/code/"+e,type:"GET",success:function(){function a(a){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var c,f,g,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.data){e.next=10;break}if(c=window.localStorage,c?c.setItem("weixin_user_info",JSON.stringify(a.data.user)):b("weixin_user_info",JSON.stringify(a.data.user),3),d){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,apower.user.loginByPost({provider:"weixin",unique_id:a.data.user.unionid,open_id:a.data.user.openid,language:apower.lang,registed_app:"apowersoft"});case 7:f=e.sent,g=f.ok,h=f.status;case 10:case"end":return e.stop()}},e,this)}));return a}(),error:function(a){console.log(a)}}),this.isLightMV=apower.isLightMV,this.isLightMV&&apower.user.on("logined",this.getLightmvAccountInfo,this);var k=a.store.get("lightmvAccountInfo")||a.store.get("account-data");this.isLightMV&&k&&this.getLightmvVipInfo()},getUrlWithoutAuto:function(){var b="https://"+(location.host+location.pathname),c=a.parseQuery(location.search),d=[];c&&(d=Object.keys(c));var e="";if(d.length){e="?";for(var f=0;f<d.length;f++)e+=d[f]+"="+c[d[f]]+"&";e=e.substring(0,e.length-1)}return b+e},getLightmvAccountInfo:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.req.post("https://apilightmv.aoscdn.com/api/sessions",{identity_token:apower.user.identityToken});case 2:b=d.sent,c=b.ok,e=b.data,e.data&&e.data.user&&(this.lightmvAccountInfo=e.data.user,a.store.set("lightmvAccountInfo",e.data.user),this.getLightmvVipInfo());case 6:case"end":return d.stop()}},d,this)}));return b}(),getLightmvVipInfo:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=a.store.get("lightmvAccountInfo")||a.store.get("account-data"),d.next=3,a.req.get(a.useQuery("https://apilightmv.aoscdn.com/api/my/vip",{api_token:b.api_token}));case 3:c=d.sent,e=c.ok,f=c.data,f.data&&f.data.vip&&(this.lightmvVipInfo=f.data.vip,a.store.set("lightmvVipInfo",f.data.vip));case 7:case"end":return d.stop()}},d,this)}));return b}(),getCoiniText:function(){return apower.tr("{0}糖币：{1} {2}{3}{4}个@@002432","<span>","</span>","<span>",""+(this.lightmvVipInfo&&this.lightmvVipInfo.mv_coin),"</span>")},gotoLightMvVideoList:function(){window.open(this.user.addTokenToURL(apower.getLightMvDomain()+"/user/"))},coin:function(){return this.lightmvVipInfo&&this.lightmvVipInfo.mv_coin},onClick:function(){apower.user.isLogined()||a.newComponent("login").show()},gotoBuyToken:function(){var a=apower,b=a.route;b["goto"]("/token")},willShowMenu:function(){return apower.user.isLogined()},getURL:function(){return a.env.isMobile?a.useQuery(apower.getMyAccountMobileDomain()+"/#/",{identity_token:apower.user.getToken(),lang:apower.lang}):a.useQuery(apower.getMyAccountDomain()+apower.getRegionPath()+"/",{identity_token:apower.user.getToken()})},onLogined:function(){},onLogout:function(){}}),a.registerComponent("account-win","win",{autoDestroy:!0,hideByDefault:!1,loading:!1,form:null,asWin:!0,query:{},messages:{__proto__:a.getComponent("form-fields").prototype.messages},validators:{__proto__:a.getComponent("form-fields").prototype.validators},emailMessages:{required:e("Please input email address@@001212")},passwordMessages:{required:e("Please input password@@001213")},showStatusError:function(b){var c=apower,d=c.user;b&&this.form.setError(b)||(-213==b?(a.msg.alert(e("Your last login is expired, please login again!@@001214")),d.logout(),this["goto"]("/login")):-227==b?"zh"==apower.lang?a.msg.alert("重置密码超过3次验证码错误，1天后再试"):a.msg.alert(e("Reset password more than 3 verification code errors, try again after 1 day")):a.notify.alert(e("An unknown error occurred@@001215")+" "+b))},isNotSupportPhoneNumberLogin:function(){return"zh"!==apower.lang||apower.app&&apower.app.isAceThinker},onCreated:function(){this.route&&(this.mask=!1,this.asWin=!1)},onReady:function(){this.el.on("click",this.onClick,this)},onClick:function(b){var c=a(b.target).closest("a");if(c.length&&"_blank"!==c.attr("target")){var d=c.attr("href");!d||/^https?:/.test(d)||d.startsWith("javascript:")||d.endsWith("#")||this["goto"](d)&&b.preventDefault()}},"goto":function(b){var c=apower,d=c.route,e=b.select(/\/([\w-]+)/,1),f=a.hasComponent(e)?a.getComponent(e):null,g=f&&f.prototype instanceof a.getComponent("account-win");if(this.asWin&&g){this.destroy();var h=a.parseQuery(b);return a.newComponent(e,{query:h}).show(0),!0}return d["goto"](b)}}),a.registerDirective("account-goto",{isLiteral:!0,value:"",bind:function(){this.el.on("click",this.onClick,this)},update:function(a){this.value=a},onClick:function(b){if(this.vm instanceof a.getComponent("account-win"))this.vm["goto"](this.value);else{var c=this.value,d=apower,e=(d.route,c.replace(/https?:\/\/.+?(?=\/)/,"").select(/^\/?([\w-]+)/,1)),f=a.hasComponent(e)?a.getComponent(e):null,g=f&&f.prototype instanceof a.getComponent("account-win");if(g){var h=a.parseQuery(c);a.newComponent(e,{query:h}).show()}}}}),a.registerDirective("account-logout",{bind:function(){this.el.on("click",this.onClick,this)},onClick:function(a){apower.user.logout()}}),a.registerComponent("myfield","field",{validateWhen:"",borderThrough:!0}),a.registerComponent("myform","form-fields",{onlyValidateFirst:!0,autoComplete:!1}),a.registerComponent("login","account-win",{template:'\n        <div class="win account-win form">\n            <div class="login-switch" f-if="hasFollowLogin" :class.password-login="!isFollowLogin" @click="switchLoginMethod()">\n                <p class="tip">Login in other ways@@001942</p>\n                <div class="cover"></div>\n            </div>\n			<div class="form-title">Login@@001166</div>\n\n			<myform f-if="!isFollowLogin || !hasFollowLogin" @submit="submit" :messages="messages" :validators="validators" f-ref="form">\n                <myfield class="form-field"\n                    style="position:relative;"\n					:messages="isNotSupportPhoneNumberLogin() ? emailMessages : emailOrPhoneNumberMessages"\n					:rules="[\'required\', isNotSupportPhoneNumberLogin() ?\'email\' : \'emailOrPhoneNumber\', \'-200\']"\n				>\n                    <input type="text"\n                        :placeholder="isNotSupportPhoneNumberLogin() ? \'Email@@001206\' : \'Email / Phone Number@@001200\' | trans"\n                        name="emailOrPhoneNumber"\n                        autocomplete="off"\n						maxlength="100"\n						required\n						f-focus\n                    >\n                </myfield>\n                <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->\n                <input style="display:none" type="text" name="emailOrPhoneNumber"/>\n\n				<myfield class="form-field" :messages="passwordMessages" :rules="[\'required\', \'minlength\', \'-207\']">\n					<input type="password" placeholder="{Password@@001201}" name="password" minlength="6" maxlength="30">\n                </myfield>\n                \n                <div f-if="!isFollowLogin || !hasFollowLogin" class="form-misc">\n                    <span class="form-goto form-forget-password" style="line-height: 14px;" @click="gotoResetPassport">Forgot Password@@001169</span>\n                    <span class="form-goto form-another-login" :class.gr="lang === \'el\'" style="line-height: 14px;" f-account-goto="/login-without-password">Password-less login@@001170</span>\n                </div>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Login@@001166}">\n				</div>\n            </myform>\n            \n            <div f-if="hasFollowLogin && isFollowLogin" class="qrcode" f-loading="loadingQrCode">\n                <p class="title">微信扫码，关注公众号登录</p>\n                <img :src="qrcodeSrc" />\n            </div>\n\n			<third-party f-if="!isFollowLogin || !hasFollowLogin" class="form-foot">\n				<span class="form-goto form-switch" f-account-goto="/register">Register@@001171</span>\n            </third-party>\n            <div id="preloader"></div>\n		</div>\n	',loading:!1,loadingQrCode:!1,isFollowLogin:!0,hasFollowLogin:!1,qrcodeSrc:null,qrcodeKey:null,lang:null,emailOrPhoneNumberMessages:{required:e("Please input an email address or phone number@@001216"),emailOrPhoneNumber:e("Please input a valid email address or phone number@@001217")},validators:{__proto__:a.getComponent("account-win").prototype.validators,emailOrPhoneNumber:function(a,b){return this.isRuleValid("email")||this.isRuleValid("phone")}},hidePlaceholder:!1,isInSoftware:!1,switchLoginMethod:function(){this.isFollowLogin=!this.isFollowLogin,this.isFollowLogin?this.queryLoginState():apower.polling&&(clearInterval(apower.polling),apower.polling=null)},focusEmailOrPhoneNumber:function(){jQuery("#EmailOrPhoneNumber").focus()},getEmailOrPhoneNumber:function(){var a=this.query;return this.form.getFieldValue("emailOrPhoneNumber")||a.email||a.phone},onCreated:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.lang=apower.lang,b=a.parseQuery(location.search),b&&b.isFromRegister&&1==b.isFromRegister&&(apower.isFromRegister=!0),"zh"!==this.lang||apower.isFromRegister||apower.app&&apower.app.isAceThinker||a.env.isMobile||a.env.isMicroMessenger){d.next=8;break}return this.hasFollowLogin=!0,d.next=7,this.getQrCode();case 7:this.queryLoginState();case 8:apower.isFromRegister=!1,this.messages={__proto__:this.messages,"-200":function(){var a=c.form.getField("emailOrPhoneNumber"),b=a.getValue();return a.isRuleValid("email")?e("The email address doesn't have an associated user account. You can {0}Register Now{1}@@001377",'<a href="/register?email='+b+'">',"</a>"):e("The phone number doesn't have an associated user account. You can {0}Register Now{1}@@001378",'<a href="/register?phone='+b+'">',"</a>")},"-207":e("Incorrect account or password@@001220")},this.isInSoftware=apower.app&&"software"===apower.app.env,this.isInSoftware&&InvokeApp("get-passport-info",function(a){apower.user.brand=a.data.app_info.brand});case 12:case"end":return d.stop()}},d,this)}));return b}(),onReady:function(){var a=this.query;(a.email||a.phone)&&this.form.setFieldValue("emailOrPhoneNumber",a.email||a.phone)},submit:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g,h;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=apower,d=b.user,e=a.emailOrPhoneNumber,apower.app&&"software"===apower.app.env&&InvokeApp("debug",{data:{info:"Login Start"}}),delete a.emailOrPhoneNumber,this.form.getField("emailOrPhoneNumber").isRuleValid("email")?a.email=e:a.telephone=e,jQuery(".form-submit .loading").show(),this.loading=!0,apower.app&&"software"===apower.app.env&&InvokeApp("debug",{data:{loginPostData:a}}),c.next=10,d.loginByPost(a);case 10:f=c.sent,g=f.ok,h=f.status,apower.app&&"software"===apower.app.env&&InvokeApp("debug",{data:{info:"login response",ok:g,status:h}}),g?(apower.app&&"software"===apower.app.env&&InvokeApp("debug",{data:{info:"login success"}}),this.onLoginSuccess()):(apower.app&&"software"===apower.app.env&&InvokeApp("debug",{data:{info:"login failed"}}),this.loading=!1,this.showStatusError(h));case 15:case"end":return c.stop()}},c,this)}));return a}(),changeLoginMethod:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.isFollowLogin=!1,apower.polling&&(clearInterval(apower.polling),apower.polling=null);case 2:case"end":return a.stop()}},c,this)}));return a}(),getQrCode:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loadingQrCode=!0,b=a.parseQuery(location.search),c="/api/qrcode",apower.isLightMV&&(c=a.useQuery(c,{account:"lightmv"})),d.next=6,apower.user.req.get(c);case 6:e=d.sent,e&&e.data&&(this.qrcodeSrc=e.data.url,this.qrcodeKey=e.data.key,a.digest()),this.loadingQrCode=!1;case 9:case"end":return d.stop()}},d,this)}));return b}(),queryLoginState:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:b=apower,c=b.user,e=b.license,f=b.route,g={},h=this,g.qrcode_key=this.qrcodeKey,g.language=apower.lang,apower.polling&&(clearInterval(apower.polling),apower.polling=null),apower.app&&"software"===apower.app.env?InvokeApp("get-passport-info",{},function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function d(b){return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:g.brand="apowersoft",g.registed_app=b.data.app_info.name,apower.polling=setInterval(_asyncToGenerator(regeneratorRuntime.mark(function f(){var b,d,h,i;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,c.req.get(a.useQuery("/api/sessions",g));case 2:if(b=f.sent,d=b.ok,h=b.data,i=b.status,!h||!h.identity_token){f.next=16;break}return clearInterval(apower.polling),apower.polling=null,f.next=11,c.set(h);case 11:return f.next=13,e.update();case 13:c.info.identity_token=h.identity_token,InvokeApp("update-passport-info",{data:{license_info:e.info?e.info:{},user_info:c.info?c.info:{}}}),c.info.telephone||c.info.email?(InvokeApp("debug",{info:"goto account"}),apower.route["goto"]("/account"),InvokeApp("resize-window",{width:690,height:413})):(InvokeApp("debug",{info:"goto bind"}),apower.route["goto"]("/binding"));case 16:case"end":return f.stop()}},f,this)})).bind(this),2e3);case 3:case"end":return d.stop()}},d,this)}));return function(a){return b.apply(this,arguments)}}().bind(this)):(g.brand="apowersoft",g.registed_app="passport",apower.polling=setInterval(_asyncToGenerator(regeneratorRuntime.mark(function i(){var b,d,e,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,c.req.get(a.useQuery("/api/sessions",g));case 2:if(b=h.sent,d=b.ok,e=b.data,f=b.status,!e||!e.identity_token){h.next=19;break}return clearInterval(apower.polling),apower.polling=null,h.next=11,c.set(e);case 11:if(!apower.app||!apower.app.isFromSoftware){h.next=16;break}return h.next=14,apower.app.returnToSoftware("login");case 14:h.next=19;break;case 16:this.trigger("logined"),apower.app||this.trigger("logincompleted"),c.info.telephone||c.info.email?this.asWin?this.hide():this["goto"]("/"):this["goto"]("/binding");case 19:case"end":return h.stop()}},i,this)})).bind(this),2e3));case 7:case"end":return d.stop()}},d,this)}));return b}(),onLoginSuccess:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=apower,b=a.user,d=a.license,e=a.route,this.trigger("logined"),apower.app&&"software"===apower.app.env&&InvokeApp("debug",{data:{info:"logined"}}),!apower.app||!apower.app.isFromSoftware){c.next=20;break}if("software"!==apower.app.env){c.next=15;break}return c.next=7,d.update();case 7:b.info.identity_token=b.getToken(),InvokeApp("debug",{data:{info:"update-passport-info"}}),InvokeApp("update-passport-info",{data:{license_info:d.info?d.info:{},user_info:b.info?b.info:{}}}),InvokeApp("resize-window",{width:690,height:413}),this.loading=!1,this["goto"]("/account"),c.next=18;break;case 15:return this.loading=!1,c.next=18,apower.app.returnToSoftware("login");case 18:c.next=22;break;case 20:this.loading=!1,b.isBinded()?this.asWin?this.hide():this["goto"]("/"):this["goto"]("/binding");case 22:case"end":return c.stop()}},c,this)}));return a}(),gotoResetPassport:function(){var b={},c=this.form.getFieldValue("emailOrPhoneNumber");this.form.getField("emailOrPhoneNumber").isRuleValid("email")?b.email=c:this.form.getField("emailOrPhoneNumber").isRuleValid("phone")&&(b.phone=c),this["goto"](a.useQuery("/reset-password",b))}}),a.registerComponent("third-party",{template:'\n		<div class="third-party">\n			<div class="third-party-labels">\n				<div class="third-party-labels-inner">\n					<slot></slot>\n					{or@@001202}\n					{Login in another way@@001203}\n				</div>\n			</div>\n\n			<div class="third-party-logins" :style.width.px="loginsWidth" f-if="supportThirdPartyLogins">\n				<a class="third-party-login" f-for="name of getLogins()" @click="gotoLogin(name)" :class="\'third-party-login-\' + name"></a>\n			</div>\n		</div>\n    ',polling:null,loginsWidth:150,supportThirdPartyLogins:!0,onCreated:function(){var b=this,c=apower,d=c.lang;a.env.isMobile&&(this.supportThirdPartyLogins=!1),a.nextTick(function(){"zh"===d?b.loginsWidth=200:b.loginsWidth=150})},getLogins:function(){var a=apower,b=a.lang;return"zh"===b?["weixin","qq","weibo","dingtalk"]:["google","facebook","twitter"]},getLoginURL:function(b){var c=apower.user.origin,d=b;location.origin||(location.origin=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""));var e=apower.user.inMyAccountDomain?location.origin+apower.getRegionPath():location.href,f={action:"login"};apower.license&&apower.license.productId&&(f.product_id=apower.license.productId),apower.license&&apower.license.productName&&(f.product_name=apower.license.productName),apower.app&&apower.app.isFromSoftware&&(f.is_third_party_login_from_software=1),apower.route&&apower.route.returnUrl&&(f.return_url=apower.route.returnUrl),apower.app&&apower.app.isFromSoftware&&(f.from="software"),apower.app&&apower.app.isInSoftware()&&(f.is_in_software=1);var g=a.useQuery(e,f),h=c+"/login/"+d+"?callback_frontend="+encodeURIComponent(g)+"&referer=frontend";return h},gotoLogin:function(a){if(!("weixin"!==a||apower.app&&apower.app.isAceThinker))return this.parent&&"/login"==this.parent.route.path&&this.parent.hasFollowLogin?(this.parent.isFollowLogin=!0,this.parent.queryLoginState()):apower.route["goto"]("/login"),!1;var b=apower,c=b.license,d=(b.route,b.user);apower.app&&"software"===apower.app.env&&apower.app.isFromSoftware?(this.polling||(this.polling=setInterval(function(){InvokeApp("get-passport-info",{},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(a){var e;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(a&&a.data&&a.data.license_info)){b.next=11;break}if(e=a.data.license_info,c.info=a.data.license_info,d.info=a.data.user_info,!e.is_login){b.next=11;break}return clearInterval(this.polling),this.polling=null,b.next=9,c.update();case 9:InvokeApp("update-passport-info",{data:{license_info:c.info?c.info:{},user_info:d.info?d.info:{}}}),d.info.telephone||d.info.email?(InvokeApp("debug",{info:"goto account"}),InvokeApp("resize-window",{width:690,height:413}),apower.route["goto"]("/account")):(InvokeApp("debug",{info:"goto bind"}),apower.route["goto"]("/binding"));case 11:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}().bind(this))}.bind(this),500)),InvokeApp("open-file",{file:this.getLoginURL(a)}),console.log(this.getLoginURL(a))):window.location=this.getLoginURL(a)}}),a.registerComponent("login-without-password","account-win",{template:'\n        <div class="win account-win form login-without-password-win">\n            <div class="login-switch" f-if="hasFollowLogin" :class.password-login="!isFollowLogin" @click="passwordLogin()">\n                <p class="tip">Login in other ways@@001942</p>\n                <div class="cover"></div>\n            </div>\n\n			<div class="form-title">Password-less login@@001170</div>\n\n			<div class="login-ways" f-hide="isNotSupportPhoneNumberLogin()">\n				<div class="login-way-phone" :class.active="way === \'phone\'" @click="way = \'phone\'"></div>\n				<div class="login-way-email" :class.active="way === \'email\'" @click="way = \'email\'"></div>\n			</div>\n\n			<myform f-show="way === \'phone\'" @submit="submit" :messages="messages" :validators="validators" f-ref="phoneForm">\n				<myfield class="form-field form-phone-field" f-ref="phoneNumberInput" :messages="phoneMessages" :rules="[\'required\', \'phone\', \'-211\']">\n					<country-select f-model="countryCode"></country-select>\n					<input type="text" class="login-contry-input" placeholder="{Phone number@@001204}" name="telephone" minlength="7" maxlength="14">\n				</myfield>\n\n				<myfield class="form-field" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" name="captcha">\n					<div class="form-send" :class.active="phoneForm.getFieldValue(\'telephone\')" @click="send" f-if="!phoneTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{phoneTimeout}}s</div>\n				</myfield>\n\n                <div class="form-misc">\n                    <span class="form-goto form-another-login" style="margin-left: auto;max-width: inherit;" @click="passwordLogin()">Password login@@001173</span>\n                </div>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Login@@001166}">\n				</div>\n			</myform>\n\n			<myform f-show="way === \'email\'" @submit="submit" :messages="messages" :validators="validators" f-ref="emailForm">\n				<myfield class="form-field" :messages="emailMessages" :rules="[\'required\', \'email\', \'-210\']">\n					<input type="text" placeholder="{Email@@001206}" name="email" maxlength="100">\n				</myfield>\n\n				<myfield class="form-field" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" name="captcha">\n					<div class="form-send" :class.active="emailForm.getFieldValue(\'email\')" @click="send" f-if="!emailTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{emailTimeout}}s</div>\n				</myfield>\n\n                <div class="form-misc">\n                    <span class="form-goto form-another-login" style="margin-left: auto;max-width: inherit;" @click="passwordLogin()">Password login@@001173</span>\n                </div>\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Login@@001166}">\n				</div>\n            </myform>\n            \n            <div class="account-win-privacy" :class.inline-privacy="inlinePrivacy" f-html="getPolicyText()"></div>\n\n			<third-party class="form-foot">\n				<span class="form-goto form-switch" f-account-goto="/register">Register@@001171</span>\n			</third-party>\n		</div>\n	',
phoneMessages:{required:e("Please input your phone number@@001221")},verificationCodeMessages:{required:e("Please input verification code@@001222"),verificationCodeLength:e("Invalid verification code@@001223")},way:"",timeout:0,emailTimeout:0,phoneTimeout:0,captchasScene:"login",preparingToSend:!1,type:"",inlinePrivacy:!1,hasFollowLogin:!1,isFollowLogin:!1,lang:null,isInSoftware:!1,getPolicyText:function(){var a=apower.getDomain();return this.isInSoftware?apower.tr("Registration means consent {0}Service agreement{1}, {2}Privacy{3} and {4}Cookies statement{5}@@001389","<a class=\"register-terms\" onclick=\"InvokeApp('open-file', {file: '"+apower.getDomain()+"/terms'})\">","</a>","<a class=\"register-privacy\" onclick=\"InvokeApp('open-file', {file: '"+apower.getDomain()+"/privacy'})\">","</a>","<a class=\"register-policy\" onclick=\"InvokeApp('open-file', {file: '"+apower.getDomain()+"/cookies-policy'})\">","</a>"):apower.tr("Registration means consent {0}Service agreement{1}, {2}Privacy{3} and {4}Cookies statement{5}@@001389",'<a target="_blank" href="'+a+'/terms">',"</a>",'<a target="_blank" href="'+a+'/privacy">',"</a>",'<a target="_blank" href="'+a+'/cookies-policy">',"</a>")},passwordLogin:function(){this["goto"]("/login")},onCreated:function(){this.way=this.isNotSupportPhoneNumberLogin()?"email":"phone",this.lang=apower.lang,this.isInSoftware=apower.app&&"software"===apower.app.env;a.parseQuery(location.search);"zh"!==this.lang||apower.app&&apower.app.isAceThinker||(this.hasFollowLogin=!0),this.inlinePrivacy=!1,("myaccount.apowersoft.com"!==window.location.hostname||apower.app&&apower.app.isInSoftware())&&(this.inlinePrivacy=!0),this.messages={__proto__:this.messages,"-206":e("Invalid verification code@@001223"),"-210":e("You can't send verification code to an email address more than 3 times each day@@001379"),"-211":e("You can't send verification code to a phone number more than 3 times each day@@001380")},this.validators={__proto__:this.validators,verificationCodeLength:function(a){return 4===a.trim().length}}},onReady:function(){var b=this,c=this.query;c.type&&(this.type=c.type),(c.phone||"phone"===this.type)&&(this.way="phone",this.phoneForm.setFieldValue("telephone",c.phone||"")),(c.email||"email"===this.type)&&(this.way="email",this.emailForm.setFieldValue("email",c.email||"")),this.watch("way",function(c){b.form="phone"===c?b.phoneForm:b.emailForm,a.nextTick(function(){b.form.el.find("input").eq(0).focus()})},!0)},send:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h,i,j=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=void 0,this.preparingToSend=!0,this.form.setUnTouched(),d.next=5,this.checkEmailOrPhoneNumber();case 5:if(!d.sent){d.next=15;break}if(b="phone"===this.way?{telephone:this.phoneForm.getFieldValue("telephone"),country_code:this.countryCode,scene:this.captchasScene}:{email:this.emailForm.getFieldValue("email"),scene:this.captchasScene},!b){d.next=15;break}return d.next=10,apower.user.req.post("/api/captchas",b);case 10:c=d.sent,e=c.ok,f=c.data,g=c.status,e?"phone"===this.way?(this.phoneTimeout=60,a.digest(),h=setInterval(function(){j.phoneTimeout-=1,0===j.phoneTimeout&&clearInterval(h),a.digest()},1e3)):(this.emailTimeout=60,a.digest(),i=setInterval(function(){j.emailTimeout-=1,0===j.emailTimeout&&clearInterval(i),a.digest()},1e3)):this.showStatusError(g);case 15:this.preparingToSend=!1;case 16:case"end":return d.stop()}},d,this)}));return b}(),checkEmailOrPhoneNumber:function(){return"phone"===this.way?this.phoneForm.validateFields("telephone"):this.emailForm.validateFields("email")},submit:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g,h,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=apower,d=b.license,e=b.user,"phone"===this.way&&(a.country_code=this.countryCode),a.registed_app=d.getRegisteredApp(),this.loading=!0,c.next=6,apower.user.loginByPost(a);case 6:if(f=c.sent,g=f.ok,h=f.data,i=f.status,!apower.app||"software"!==apower.app.env||!g){c.next=14;break}return c.next=13,d.update();case 13:InvokeApp("update-passport-info",{data:{license_info:d.info?d.info:{},user_info:e.info?e.info:{}}});case 14:this.loading=!1,g?this.onLoginSuccess(h):this.showStatusError(i);case 16:case"end":return c.stop()}},c,this)}));return a}(),onLoginSuccess:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=apower,d=b.license,e=b.user,!apower.app||!apower.app.isFromSoftware){a.next=13;break}if("software"!==apower.app.env){a.next=7;break}InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account"),a.next=11;break;case 7:return a.next=9,d.update();case 9:return a.next=11,apower.app.returnToSoftware("login-without-password");case 11:a.next=14;break;case 13:this.asWin?this.hide():this["goto"]("/");case 14:case"end":return a.stop()}},c,this)}));return a}()}),a.registerComponent("country-select","inputable-select",{COUNTRY_CODE_BY_LANG:{zh:"+86"},onCreated:function(){this.data||this.getData(),this.value=this.COUNTRY_CODE_BY_LANG[apower.lang]||this.COUNTRY_CODE_BY_LANG.zh,this.trigger("change",this.value)},getData:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,apower.user.req.get("/api/countrycodes");case 2:a=c.sent,b=a.ok,d=a.data,e=a.status,b&&(this.__proto__.data=d.map(function(a){var b=a.split(":"),c=_slicedToArray(b,2),d=c[0],e=c[1];return[d,e+" "+d]}));case 7:case"end":return c.stop()}},c,this)}));return a}(),onReady:function(){this.el.addClass("country-select")}}),a.registerComponent("register","login-without-password",{template:'\n		<div class="win account-win form register">\n			<div class="form-title">Register@@001171</div>\n\n			<div class="login-ways" f-hide="isNotSupportPhoneNumberLogin()">\n				<div class="login-way-phone" :class.active="way === \'phone\'" @click="way = \'phone\'"></div>\n				<div class="login-way-email" :class.active="way === \'email\'" @click="way = \'email\'"></div>\n			</div>\n\n			<myform f-show="way === \'phone\'" @submit="submit" :messages="messages" :validators="validators" f-ref="phoneForm">\n				<myfield class="form-field form-phone-field" :messages="phoneMessages" :rules="[\'required\', \'phone\', \'-208\', \'-211\']">\n					<country-select f-model="countryCode"></country-select>\n					<input type="text" class="login-contry-input" autocomplete="off" placeholder="{Phone number@@001204}" name="telephone" minlength="7" maxlength="14">\n				</myfield>\n\n				<myfield class="form-field" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" autocomplete="off"  name="captcha">\n					<div class="form-send" :class.active="phoneForm.getFieldValue(\'telephone\')" @click="send" f-if="!phoneTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{phoneTimeout}}s</div>\n				</myfield>\n\n				<myfield class="form-field" :messages="passwordMessages" :rules="[\'required\', \'minlength\']">\n					<input :type="passwordShow ? \'text\' : \'password\'" autocomplete="off"  placeholder="{Password@@001201}" name="password" minlength="6" maxlength="30">\n					<div :class.form-password-hide="!passwordShow" :class.form-password-show="passwordShow" @click="passwordShow = !passwordShow"></div>\n				</myfield>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Register@@001171}">\n				</div>\n			</myform>\n\n			<myform f-show="way === \'email\'" @submit="submit" :messages="messages" :validators="validators" f-ref="emailForm">\n				<myfield class="form-field" :messages="emailMessages" :rules="[\'required\', \'email\', \'-208\', \'-210\']">\n					<input type="text" placeholder="{Email@@001206}" autocomplete="off"  name="email" maxlength="100">\n				</myfield>\n\n				<myfield class="form-field" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" autocomplete="off"  name="captcha">\n					<div class="form-send" :class.active="emailForm.getFieldValue(\'email\')" @click="send" f-if="!emailTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{emailTimeout}}s</div>\n				</myfield>\n\n				<myfield class="form-field" :messages="passwordMessages" :rules="[\'required\', \'minlength\']">\n					<input :type="passwordShow ? \'text\' : \'password\'" autocomplete="off"  placeholder="{Password@@001201}" name="password" minlength="6" maxlength="30">\n					<div :class.form-password-hide="!passwordShow" :class.form-password-show="passwordShow" @click="passwordShow = !passwordShow"></div>\n				</myfield>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Register@@001171}">\n				</div>\n            </myform>\n            \n            <div class="account-win-privacy" :class.inline-privacy="inlinePrivacy" f-html="getPolicyText()"></div>\n\n			<third-party class="form-foot">\n				<span class="form-goto form-switch" f-account-goto="/login">Login@@001166</span>			</third-party>\n		</div>\n	',captchasScene:"register",passwordShow:!1,inlinePrivacy:!1,isInSoftware:!1,onCreated:function(){var a=this;this.inlinePrivacy=!1,("myaccount.apowersoft.com"!==window.location.hostname||apower.app&&apower.app.isInSoftware())&&(this.inlinePrivacy=!0),this.messages={__proto__:this.messages,"-208":function(){if("phone"===a.way){var b=a.phoneForm.getFieldValue("telephone");return e("Phone is registered, please {0}Login{1}@@001226",'<a href="/login?phone='+b+'&isFromRegister=1">',"</a>")}var c=a.emailForm.getFieldValue("email");return e("Email address is registered, please {0}Login{1}@@001227",'<a href="/login?email='+c+'&isFromRegister=1">',"</a>")}},this.isInSoftware=apower.app&&"software"===apower.app.env,this.isInSoftware&&InvokeApp("get-passport-info",function(a){apower.user.brand=a.data.app_info.brand})},onReady:function(){},gotoLogin:function(){apower.isFromRegister=!0,apower.route["goto"]("/login")},checkEmailOrPhoneNumber:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=apower,c=b.user,e=void 0,d.next=4,a.getComponent("login-without-password").prototype.checkEmailOrPhoneNumber.call(this);case 4:if(d.sent){d.next=6;break}return d.abrupt("return",!1);case 6:return e="phone"===this.way?{telephone:this.phoneForm.getFieldValue("telephone"),country_code:this.countryCode}:{email:this.emailForm.getFieldValue("email")},d.next=9,c.req.get(a.useQuery("/api/validation",e));case 9:return f=d.sent,g=f.ok,h=f.data,g&&2==h.result&&(g=!1,status="-208"),g||this.showStatusError(status),d.abrupt("return",g);case 15:case"end":return d.stop()}},d,this)}));return b}(),submit:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g,h,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=apower,d=b.user,e=b.license,a.country_code=this.countryCode,a.registed_app=e.getRegisteredApp(),jQuery(".form-submit .loading").show(),this.loading=!0,c.next=7,apower.user.req.post("/api/users",a);case 7:if(f=c.sent,g=f.ok,h=f.data,i=f.status,this.loading=!1,!g){c.next=31;break}if(d.set(h),!apower.app||"software"!==apower.app.env){c.next=21;break}return c.next=17,e.update();case 17:InvokeApp("update-passport-info",{data:{license_info:e.info?e.info:{},user_info:d.info?d.info:{}}}),InvokeApp("get-passport-info",{},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:InvokeApp("debug",{data:{data:a,info:"get-passport-info"}}),a&&a.data&&(1===a.data.app_info.package_type?this["goto"]("/activate"):(InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account")));case 2:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}().bind(this)),c.next=29;break;case 21:if(!apower.app||!apower.app.isFromSoftware){c.next=28;break}return c.next=24,e.update();case 24:return c.next=26,apower.app.returnToSoftware("register");case 26:c.next=29;break;case 28:this.asWin?this.hide():this["goto"]("/");case 29:c.next=32;break;case 31:this.showStatusError(i);case 32:case"end":return c.stop()}},c,this)}));return a}()}),a.registerComponent("reset-password","register",{template:'\n		<div class="win account-win form register reset-password">\n			<div class="form-title">Reset password@@001174</div>\n\n			<div class="login-ways" f-hide="isNotSupportPhoneNumberLogin()">\n				<div class="login-way-phone" :class.active="way === \'phone\'" @click="way = \'phone\'"></div>\n				<div class="login-way-email" :class.active="way === \'email\'" @click="way = \'email\'"></div>\n			</div>\n\n			<myform f-show="way === \'phone\'" @submit="submit" :messages="messages" :validators="validators" f-ref="phoneForm">\n				<myfield class="form-field form-phone-field" :messages="phoneMessages" :rules="[\'required\', \'phone\', \'-208\', \'-200\', \'-211\']">\n					<country-select f-model="countryCode"></country-select>\n					<input type="text" class="login-contry-input" placeholder="{Phone number@@001204}" name="telephone" minlength="7" maxlength="14">\n				</myfield>\n\n				<myfield class="form-field" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" name="captcha">\n					<div class="form-send" :class.active="phoneForm.getFieldValue(\'telephone\')" @click="send" f-if="!phoneTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{phoneTimeout}}s</div>\n				</myfield>\n\n				<myfield class="form-field" :messages="passwordMessages" :rules="[\'required\', \'minlength\']">\n					<input :type="passwordShow ? \'text\' : \'password\'" placeholder="{Password@@001201}" name="password" minlength="6" maxlength="30">\n					<div :class.form-password-hide="!passwordShow" :class.form-password-show="passwordShow" @click="passwordShow = !passwordShow"></div>\n				</myfield>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Confirm@@001207}">\n				</div>\n			</myform>\n\n			<myform f-show="way === \'email\'" @submit="submit" :messages="messages" :validators="validators" f-ref="emailForm">\n				<myfield class="form-field" :messages="emailMessages" :rules="[\'required\', \'email\', \'-208\', \'-200\', \'-210\']">\n					<input type="text" placeholder="{Email@@001206}" name="email" maxlength="100">\n				</myfield>\n\n				<myfield class="form-field" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" name="captcha">\n					<div class="form-send" :class.active="emailForm.getFieldValue(\'email\')" @click="send" f-if="!emailTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{emailTimeout}}s</div>\n				</myfield>\n\n				<myfield class="form-field" :messages="passwordMessages" :rules="[\'required\', \'minlength\']">\n					<input :type="passwordShow ? \'text\' : \'password\'" placeholder="{Password@@001201}" name="password" minlength="6" maxlength="30">\n					<div :class.form-password-hide="!passwordShow" :class.form-password-show="passwordShow" @click="passwordShow = !passwordShow"></div>\n				</myfield>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{Confirm@@001207}">\n				</div>\n			</myform>\n\n			<div class="form-foot form-tip">\n				You can reset your password through a cell phone/mailbox@@001175\n			</div>\n		</div>\n	',captchasScene:"resetpwd",onCreated:function(){var a=this;this.messages={__proto__:this.messages,"-200":function(){if("phone"===a.way){var b=a.phoneForm.getFieldValue("telephone");return e("The phone number doesn't have an associated user account. You can {0}Register Now{1}@@001378",'<a href="/register?phone='+b+'">',"</a>")}var c=a.emailForm.getFieldValue("email");return e("The email address doesn't have an associated user account. You can {0}Register Now{1}@@001377",'<a href="/register?email='+c+'">',"</a>")}}},onReady:function(){},checkEmailOrPhoneNumber:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h,i;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=apower,c=b.user,e=void 0,d.next=4,a.getComponent("login-without-password").prototype.checkEmailOrPhoneNumber.call(this);case 4:if(d.sent){d.next=6;break}return d.abrupt("return",!1);case 6:return e="phone"===this.way?{telephone:this.phoneForm.getFieldValue("telephone"),country_code:this.countryCode}:{email:this.emailForm.getFieldValue("email")},d.next=9,c.req.get(a.useQuery("/api/validation",e));case 9:return f=d.sent,g=f.ok,h=f.data,i=f.status,g&&1==h.result&&(g=!1,i="-200"),g||this.showStatusError(i),d.abrupt("return",g);case 16:case"end":return d.stop()}},d,this)}));return b}(),submit:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g,h,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=apower,d=b.user,e=b.license,"phone"===this.way&&(a.country_code=this.countryCode),this.loading=!0,c.next=5,apower.user.req.put("/api/passwords",a);case 5:if(f=c.sent,g=f.ok,h=f.data,i=f.status,this.loading=!1,!g){c.next=34;break}if(d.set(h),!this.asWin){c.next=16;break}this.hide(),c.next=32;break;case 16:if(!apower.app||"software"!==apower.app.env){c.next=24;break}return c.next=19,e.update();case 19:InvokeApp("update-passport-info",{data:{license_info:e.info?e.info:{},user_info:d.info?d.info:{}}}),InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account"),c.next=32;break;case 24:if(!apower.app||!apower.app.isFromSoftware){c.next=31;break}return c.next=27,e.update();case 27:return c.next=29,apower.app.returnToSoftware("reset-password");case 29:c.next=32;break;case 31:this["goto"]("/");case 32:c.next=35;break;case 34:this.showStatusError(i);case 35:case"end":return c.stop()}},c,this)}));return a}()}),a.registerComponent("binding","register",{template:'\n		<div class="win account-win form">\n			<div class="form-title">Binding@@001176</div>\n\n			<div class="login-ways" f-hide="isNotSupportPhoneNumberLogin() || type">\n				<div class="login-way-phone" :class.active="way === \'phone\'" @click="way = \'phone\'"></div>\n				<div class="login-way-email" :class.active="way === \'email\'" @click="way = \'email\'"></div>\n			</div>\n\n			<myform f-show="way === \'phone\'" @submit="submit" :messages="messages" :validators="validators" f-ref="phoneForm">\n				<myfield class="form-field form-phone-field" :messages="phoneMessages" :rules="[\'required\', \'phone\', \'-211\', \'-208\']">\n					<country-select f-model="countryCode"></country-select>\n					<input type="text" class="login-contry-input" f-focus placeholder="{Phone number@@001204}" name="telephone" minlength="7" maxlength="14">\n				</myfield>\n\n				<myfield class="form-field" f-ref="phoneVerificationInput" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" name="captcha">\n					<div class="form-send" :class.active="phoneForm.getFieldValue(\'telephone\')" @click="send" f-if="!phoneTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{phoneTimeout}}s</div>\n				</myfield>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{OK@@001410}">\n				</div>\n			</myform>\n\n			<myform f-show="way === \'email\'" @submit="submit" :messages="messages" :validators="validators" f-ref="emailForm">\n				<myfield class="form-field" :messages="emailMessages" :rules="[\'required\', \'email\', \'-210\', \'-208\']">\n					<input type="text" placeholder="{Email@@001206}" name="email" maxlength="100">\n				</myfield>\n\n				<myfield class="form-field" f-ref="emailVerificationInput" :messages="verificationCodeMessages" :rules="[\'required\', \'verificationCodeLength\', \'-206\']">\n					<input type="text" placeholder="{Verification Code@@001205}" name="captcha">\n					<div class="form-send" :class.active="emailForm.getFieldValue(\'email\')" @click="send" f-if="!emailTimeout" f-disable="preparingToSend">Send@@001172</div>\n					<div class="form-send-timeout" f-else>{{emailTimeout}}s</div>\n				</myfield>\n\n				<div class="form-submit" f-loading="loading">\n					<input type="submit" value="{OK@@001410}">\n                </div>\n			</myform>\n\n			<div class="form-foot form-tip" f-if="way === \'phone\'">\n				After binding, you can use your phone number to login or retrieve the password@@001178\n			</div>\n			<div class="form-foot form-tip" f-else>\n				After binding, you can use your email to login or retrieve the password@@001179\n			</div>\n		</div>\n	',captchasScene:"bind",canSkip:!0,isConfirmed:!1,onCreated:function(){var a=this;this.messages={__proto__:this.messages,"-204":function(){return e("phone"===a.way?'You\'ve binded to the phone number, click "Skip" below to continue@@001381':'You\'ve binded to the email address, click "Skip" below to continue@@001382')},"-205":function(){return e("phone"===a.way?'The phone number is binded to another account, you may choose another phone number, or click "Skip" below to continue@@001230':'The email address is binded to another account, you may choose another email, or click "Skip" below to continue@@001231')},"-208":function(){if("phone"===a.way){a.phoneForm.getFieldValue("telephone");return e("The phone number has been already registered, please use another valid number or {0}Login{1}.@@002030",'<a href="/login-without-password">',"</a>")}a.emailForm.getFieldValue("email");return e("The Email has been already registered, please use another valid Email or {0}Login{1}.@@002031",'<a href="/login-without-password">',"</a>")}}},onReady:function(){},submit:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,f,g,h,i,j,k;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=apower,d=b.user,f=this.query,g=d.getId(),h=f.unique_id&&f.provider,"phone"===this.way&&(a.country_code=this.countryCode),h&&(a.unique_id=f.unique_id,a.provider=f.provider),this.loading=!0,c.next=9,d.bindContact(a);case 9:i=c.sent,j=i.ok,k=i.status,this.loading=!1,j||-204==k?this.onBindSuccess():-206==k?"phone"===this.way?this.phoneVerificationInput.setErrorMessage(e("Invalid verification code@@001223")):this.emailVerificationInput.setErrorMessage(e("Invalid verification code@@001223")):this.showStatusError(k);case 14:case"end":return c.stop()}},c,this)}));return a}(),onBindSuccess:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:b=apower,c=b.license,apower.app&&apower.app.isFromSoftware?apower.app.isInSoftware()?(InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account")):this["goto"]("/congrats-logined"):this.asWin?(this.hide(),a.notify.success(e("phone"===this.way?"Phone number binded!@@001232":"Email binded!@@001233"))):this.asWin?this.hide():this["goto"]("/"),apower.user.onAfterBindingContact();case 3:case"end":return d.stop()}},d,this)}));return b}(),confirm:function(){apower.app&&apower.app.isFromSoftware?apower.app.isInSoftware()?(InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account")):this["goto"]("/congrats-logined"):this.asWin?this.hide():this.asWin?this.hide():this["goto"]("/"),apower.user.onAfterBindingContact()},skip:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=apower,b=a.license,d=a.user,apower.user.info&&(apower.user.info.email||apower.user.info.telephone)?(apower.app&&apower.app.isFromSoftware?apower.app.isInSoftware()?(InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account")):this["goto"]("/congrats-logined"):this.asWin?this.hide():this.asWin?this.hide():this["goto"]("/"),apower.user.onAfterBindingContact()):this.isConfirmed=!0;case 2:case"end":return c.stop()}},c,this)}));return a}()}),a.register("account",{template:'\n    <div class="win account-win account-license" f-loading="loading" :class.moveup="!isInSoftware">\n      <div class="account-license-main" f-if="!loading && !isShowmoreApp && !isBackgroundEraserApp && !isIosUnlockApp">\n        <div class="account-license-top">\n          <div class="account-license-vip" :class.active="license.isActivated()" @click="onClickBuy"\n            f-tip="license.isActivated() ? \'\' : \'Upgrade to VIP@@001184\' | trans"></div>\n          <div class="account-license-portrait" f-account-goto="/my-account">\n            <img f-if="avatar && !isGemsoft" :src="avatar || \'\'" />\n            <span f-if="!avatar || isGemsoft" class=\'default-avatar\'></span>\n          </div>\n          <div class="account-license-info">\n            <div class="account-license-title" f-if="user.isAnonymous()">\n              尚未 <span f-account-goto="/register">注册/登录</span>\n            </div>\n            <div class="account-license-title" f-if="!user.isAnonymous() && showSubMenu">\n              <drop class="account-license-name" align="br" event="click" :class.top="showTip">\n                {{accountPre}}{{user.getName()}}\n                <ul class="account-license-menu">\n                  <li class="account-license-account" @click="toMyAccount">My Account@@001167</li>\n                  <li class="account-license-lock" @click="toChangePassword">Change Password@@001181</li>\n                  <li class="account-license-key" f-if="!license.isActivated()" @click="activate">Activate@@001182</li>\n                  <li class="account-license-out" @click="logout">Log out@@001183</li>\n                </ul>\n              </drop>\n              <span class="account-license-logout-btn" @click="logout"></span>\n            </div>\n            <div class="account-license-title" f-if="!showSubMenu">\n              <p style="text-align: center;">{{getName()}}</p>\n              <div class="account-license-vip" :class.active="license.isActivated()"></div>\n            </div>\n\n\n            <table class="account-license-license-info">\n              <tr>\n                <th>{Version@@001208}:</th>\n                <td colspan="2">\n                  {{license.getProductLicenseText()}}\n                  <span\n                    f-if="isGemsoft">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n                </td>\n              </tr>\n\n              <tr>\n                <th>{License type@@001209}:</th>\n                <td>\n                  {{license.getPassportLicenseText()}}\n                  <span f-if="!license.isActivated() && license.isHasNoTrial()" @click="refresh"\n                    :class.refreshing="refreshing" class="refresh-status-btn"></span>\n                </td>\n              </tr>\n              <tr f-else\n                f-if="(license.isActivated() || license.isExpired() || isActivated || !license.isHasNoTrial()) && !license.isLifetime() && !license.isTrial ()">\n                <th>{Valid until@@001210}:</th>\n                <td class="account-license-expire-date" :class.account-expired="license.isExpired()">\n                  {{getExpiredText()}}\n                </td>\n              </tr>\n              <tr>\n                <td f-if="license.isNearlyExpired() && !isGemsoft">\n                  <button class="account-license-buy" style="background-color: #24a31d; color: white;"\n                    :attr.type="license.isNearlyExpired()? \'active\' : \'\'"\n                    @click="onClickBuy"><span>Renew@@001185</span>VIP</button>\n                </td>\n              </tr>\n              <tr f-if="!license.isActivated() && license.isHasNoTrial() && !isGemsoft">\n                <td>\n                  <button type="primary" style="background-color: #24a31d; color: white;" class="account-license-upgrade"\n                    @click="onClickBuy">Upgrade to VIP@@001184</button>\n                </td>\n                <td f-if="lang !== \'zh\'">\n                  <button type="primary" style="background-color: white; color: black;" class="account-license-activate"\n                    @click="activate"><span>Activate@@001182</span> VIP</button>\n                </td>\n              </tr>\n              <tr f-if="isGemsoft">\n                <td>\n                  <button type="primary" style="background-color: #24a31d; color: white; font-size:12px;"\n                    class="account-license-activate" @click="activate"><span>{{getActivateText()}}</span></button>\n                </td>\n                <td>\n                  <a style="font-size:12px;display:block;line-height: 34px;margin: 10px 0 4px 14px;" @click="onClickBuy"\n                    class="account-license-faq-link" target="_blank">{{getGemsoftStoreText()}}</a>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n\n        <div class="account-license-support" f-if="!isGemsoft">\n          <a @click="gotoFaq" f-if="support.urls && support.urls.faq" class="account-license-faq-link"\n            target="_blank">FAQ@@001186</a>\n          <span f-if="support.urls && support.urls.faq">|</span>\n          <a @click="gotoForum" f-if="support.urls && support.urls.forum" class="account-license-forum-link"\n            target="_blank">Community@@001187</a>\n          <span f-if="support.urls && support.urls.forum">|</span>\n          <a @click="gotoFindVip" class="account-license-find-link" target="_blank">找回VIP@@002133</a>\n        </div>\n      </div>\n\n      <!-- showmore start -->\n      <div class="account-license-main" f-if="!loading && isShowmoreApp && showMoreUserInfo && showMoreAppLicense">\n        <div class="account-license-top">\n          <div class="account-license-vip" :class.active="showMoreAppLicense.vip_activated" @click="onClickBuy"\n            f-tip="showMoreAppLicense.vip_activated ? \'\' : \'Upgrade to VIP@@001184\' | trans"></div>\n          <div class="account-license-portrait" f-account-goto="/my-account">\n            <img f-if="showMoreUserInfo && showMoreUserInfo.avatar_url" :src="showMoreUserInfo.avatar_url || \'\'" />\n            <span f-if="!showMoreUserInfo || !showMoreUserInfo.avatar_url" class=\'default-avatar\'></span>\n          </div>\n          <div class="account-license-info">\n            <div class="account-license-title">\n              <drop class="account-license-name" align="br" event="click" :class.top="showTip">\n                {{showMoreUserInfo.nickname || showMoreUserInfo.email}}\n                <ul class="account-license-menu">\n                  <li class="account-license-account" @click="toMyAccount">My Account@@001167</li>\n                  <li class="account-license-lock" @click="toChangePassword">Change Password@@001181</li>\n                  <li class="account-license-key" f-if="!showMoreAppLicense.vip_activated" @click="activate">\n                    Activate@@001182</li>\n                  <li class="account-license-out" @click="logout">Log out@@001183</li>\n                </ul>\n              </drop>\n              <span class="account-license-logout-btn" @click="logout"></span>\n            </div>\n\n            <table class="account-license-license-info" f-if="showMoreUserInfo">\n              <tr>\n                <th>{License type@@001209}:</th>\n                <td>\n                  {{getPassportLicenseText()}}\n                  <span f-if="!showMoreAppLicense.vip_activated" @click="refresh" :class.refreshing="refreshing"\n                    class="refresh-status-btn"></span>\n                </td>\n              </tr>\n              <tr f-if="showMoreAppLicense.vip_activated">\n                <th>{Valid until@@001210}:</th>\n                <td class="account-license-expire-date">\n                  {{showMoreAppLicense.vip_expired_time}}\n                </td>\n              </tr>\n              <tr f-if="!showMoreAppLicense.vip_activated">\n                <td>\n                  <button type="primary" style="background-color: #24a31d; color: white;" class="account-license-upgrade"\n                    @click="onClickBuy">Upgrade to VIP@@001184</button>\n                </td>\n                <td>\n                  <button type="primary" style="background-color: white; color: black;" class="account-license-activate"\n                    @click="activate"><span>Activate@@001182</span> VIP</button>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n\n        <div class="account-license-support">\n          <a @click="gotoFaq" f-if="support.urls && support.urls.faq" class="account-license-faq-link"\n            target="_blank">FAQ@@001186</a>\n          <span f-if="support.urls && support.urls.faq">|</span>\n          <a @click="gotoForum" f-if="support.urls && support.urls.forum" class="account-license-forum-link"\n            target="_blank">Community@@001187</a>\n          <span f-if="support.urls && support.urls.forum">|</span>\n          <a @click="gotoFindVip" class="account-license-find-link" target="_blank">找回VIP@@002133</a>\n        </div>\n      </div>\n      <!-- showmore end -->\n\n      <!-- 抠图软件 start -->\n      <div class="account-license-main"\n        f-if="!loading && isBackgroundEraserApp && backgroundEraserUserInfo && backgroundEraserAppLicense">\n        <div class="account-license-top">\n          <div class="account-license-vip" :class.active="backgroundEraserAppLicense.vip" @click="onClickBuy"\n            f-tip="backgroundEraserAppLicense.vip ? \'\' : \'Upgrade to VIP@@001184\' | trans"></div>\n          <div class="account-license-portrait" f-account-goto="/my-account">\n            <img f-if="avatar && !isGemsoft" :src="avatar || \'\'" />\n            <span f-if="!avatar || isGemsoft" class=\'default-avatar\'></span>\n          </div>\n          <div class="account-license-info">\n            <div class="account-license-title">\n              <drop class="account-license-name" align="br" event="click" :class.top="showTip">\n                {{backgroundEraserUserInfo.nickname || backgroundEraserUserInfo.email}}\n                <ul class="account-license-menu">\n                  <li class="account-license-account" @click="toMyAccount">My Account@@001167</li>\n                  <li class="account-license-lock" @click="toChangePassword">Change Password@@001181</li>\n                  <li class="account-license-out" @click="logout">Log out@@001183</li>\n                </ul>\n              </drop>\n              <span class="account-license-logout-btn" @click="logout"></span>\n            </div>\n\n            <table class="account-license-license-info" f-if="backgroundEraserAppLicense">\n              <tr>\n                <th>{License type@@001209}:</th>\n                <td>\n                  {{getBackgroundEraserLicenseText()}}\n                </td>\n              </tr>\n              <tr>\n                <th>{Remaining times@@002558}:</th>\n                <td class="balance" f-if="!backgroundEraserAppLicense.balance || backgroundEraserAppLicense.balance == 0">\n                  {{backgroundEraserAppLicense.balance}}\n                  <buttons class="buy-btn" @click="onClickBuy">Buy now@@001188</button>\n                </td>\n                <td class="balance" f-if="backgroundEraserAppLicense.balance > 0">\n                  {{backgroundEraserAppLicense.balance}}\n                  <buttons class="buy-btn" @click="onClickBuy">增加次数@@002559</button>\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n\n        <div class="account-license-support">\n          <a @click="gotoFaq" f-if="support.urls && support.urls.faq" class="account-license-faq-link"\n            target="_blank">FAQ@@001186</a>\n          <span f-if="support.urls && support.urls.faq">|</span>\n          <a @click="gotoForum" f-if="support.urls && support.urls.forum" class="account-license-forum-link"\n            target="_blank">Community@@001187</a>\n          <span f-if="support.urls && support.urls.forum">|</span>\n          <a @click="gotoFindVip" class="account-license-find-link" target="_blank">找回VIP@@002133</a>\n        </div>\n      </div>\n      <!-- 抠图软件 end -->\n\n      <!-- ios解锁软件 start -->\n      <div class="account-license-main"\n        f-if="!loading && isIosUnlockApp && iosUnlockAppLicense">\n        <div class="account-license-top">\n          <div class="account-license-vip" :class.active="iosUnlockAppLicense.residue_unlock_num" @click="onClickBuy"\n            f-tip="iosUnlockAppLicense.residue_unlock_num ? \'\' : \'Upgrade to VIP@@001184\' | trans"></div>\n          <div class="account-license-portrait" f-account-goto="/my-account">\n            <img f-if="avatar && !isGemsoft" :src="avatar || \'\'" />\n            <span f-if="!avatar || isGemsoft" class=\'default-avatar\'></span>\n          </div>\n          <div class="account-license-info">\n            <div class="account-license-title">\n              <drop class="account-license-name" align="br" event="click" :class.top="showTip">\n                {{accountPre}}{{user.getName()}}\n                <ul class="account-license-menu">\n                  <li class="account-license-account" @click="toMyAccount">My Account@@001167</li>\n                  <li class="account-license-lock" @click="toChangePassword">Change Password@@001181</li>\n                  <li class="account-license-out" @click="logout">Log out@@001183</li>\n                </ul>\n              </drop>\n              <span class="account-license-logout-btn" @click="logout"></span>\n            </div>\n\n            <table class="account-license-license-info" f-if="iosUnlockAppLicense">\n              <tr>\n                <th>{Remaining times@@002558}:</th>\n                <td class="balance" f-if="!iosUnlockAppLicense.residue_unlock_num || iosUnlockAppLicense.residue_unlock_num == 0">\n                  {{iosUnlockAppLicense.residue_unlock_num}}\n                  <span @click="updateIosUnlockLicenseInfo" :class.refreshing="refreshing" class="refresh-status-btn"></span>\n                  <buttons class="buy-btn" @click="onClickBuy">Buy now@@001188</button>\n                </td>\n                <td class="balance" f-if="iosUnlockAppLicense.residue_unlock_num > 0">\n                  {{iosUnlockAppLicense.residue_unlock_num}}\n                  <span @click="updateIosUnlockLicenseInfo" :class.refreshing="refreshing" class="refresh-status-btn"></span>\n                  <buttons class="buy-btn" @click="onClickBuy">增加次数@@002559</button>\n                </td>\n                \n              </tr>\n              <tr f-if="iosUnlockAppLicense.expire_time">\n                <th>{Valid until@@001210}:</th>\n                <td>\n                  {{parseTime(iosUnlockAppLicense.expire_time)}}\n                </td>\n              </tr>\n            </table>\n          </div>\n        </div>\n\n        <div class="account-license-support">\n          <a @click="gotoFaq" f-if="support.urls && support.urls.faq" class="account-license-faq-link"\n            target="_blank">FAQ@@001186</a>\n          <span f-if="support.urls && support.urls.faq">|</span>\n          <a @click="gotoForum" f-if="support.urls && support.urls.forum" class="account-license-forum-link"\n            target="_blank">Community@@001187</a>\n          <span f-if="support.urls && support.urls.forum">|</span>\n          <a @click="gotoFindVip" class="account-license-find-link" target="_blank">找回VIP@@002133</a>\n        </div>\n      </div>\n      <!-- ios解锁软件 end -->\n\n      <div f-show="!loading" class="account-license-recommend" :href="recommended?.product_url">\n        <div class="account-license-recommend-icon"><img f-if="recommended && !isMairuan"\n            :src="recommended?.product_icon || \'\'"></div>\n        <div class="account-license-recommend-info" f-if="recommended && !isMairuan">\n          <header>{{recommended?.product_name}}</header>\n          <p>{{recommended?.introduction}}</p>\n        </div>\n        <div class="account-license-recommend-links" f-if="recommended && !isMairuan">\n          <a target="_blank" @click="gotoRecommended" class="learn-more">Learn more@@001189</a>\n        </div>\n      </div>\n      <div class="account-license-tip" f-show="!loading && showTip" @click="showTip = false">\n        <span class="bubble" :style.width.px="tipWidth" :style.height.px="tipHeight"></span>\n        <span class="bubble-arrow" :style.left.px="tipArrowLeft"></span>\n        <span class="tip" :style.left.px="tipTextLeft">Click to view more@@001433</span>\n      </div>\n    </div>\n    ',
width:760,height:453,recommended:null,isInSoftware:!1,avatar:null,urlInfo:null,showTip:!1,tipWidth:null,tipHeight:null,tipLeft:null,tipTop:null,tipArrowLeft:null,tipTextLeft:null,isGemsoft:!1,isMairuan:!1,isShowmoreApp:!1,isIosUnlockApp:!1,isBackgroundEraserApp:!1,backgroundEraserUserInfo:null,backgroundEraserAppLicense:null,iosUnlockUserInfo:null,iosUnlockAppLicense:null,app_info:null,refreshing:!1,faqLink:null,forumLink:null,accountPre:"",guid:null,lang:null,product_name:null,product_id:null,showMoreAppLicense:null,showMoreUserInfo:null,showSubMenu:!0,showmoreBaseUrl:null,backgroundEraserBaseUrl:null,iosUnlockBaseUrl:null,PASSPORT_LICENSE_TYPE_text:{trial:"Trial@@001243",daily:"Daily@@001244",monthly:"Monthly@@001527",quarterly:"Quarterly@@001245",yearly:"Yearly@@001246",lifetime:"Lifetime@@001247"},PASSPORT_LICENSE_TYPE_TEXT:{1:"Vip@@002374",2:"Plus@@002375",3:"Pro@@002376",4:"Premuim@@002377",0:"Trial@@001243"},onCreated:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.user=apower.user,this.support=apower.support,this.license=apower.license,this.isGemsoft=apower.app&&apower.app.isGemsoft,this.isInSoftware=apower.app&&"software"===apower.app.env,this.lang=apower.lang,b=this,this.isInSoftware&&InvokeApp("get-passport-info",function(a){"aff-mairuan"===a.data.app_info.type&&(b.isMairuan=!0),b.faqLink=a.data.url_info.faq?a.data.url_info.faq:null,b.forumLink=a.data.url_info.forum?a.data.url_info.forum:null,b.guid=a.data.app_info.guid,b.product_name=a.data.app_info.name,b.product_id=a.data.app_info.id,0===b.product_name.toLowerCase().indexOf("gemsoft")&&(b.isGemsoft=!0),2==a.data.app_info.package_type&&(b.showSubMenu=!1),(91===b.product_id||94===b.product_id||179===b.product_id||35===b.product_id||36===b.product_id||289===b.product_id||329===b.product_id)&&(91===b.product_id||94===b.product_id||179===b.product_id?b.showmoreBaseUrl="https://api.showmore.com/api/user":b.showmoreBaseUrl="https://api.reccloud.com/api/user",b.isShowmoreApp=!0),361===b.product_id&&(b.backgroundEraserBaseUrl="http://apiaimage.aoscdn.com/api",b.isBackgroundEraserApp=!0),(339===b.product_id||359===b.product_id)&&(b.iosUnlockBaseUrl="zh"===b.lang?"https://support.apowersoft.cn":"https://support.apowersoft.com",InvokeApp("debug",{info:"ios解锁逻辑开始"}),b.isIosUnlockApp=!0)}),this.loading=!0,!(this.user.identityToken||this.user.info&&this.user.info.identity_token)){d.next=12;break}return d.next=12,this.license.update();case 12:if(this.showTip=!!apower.isFirstLogin,this.isInSoftware&&InvokeApp("get-passport-info",function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function c(b){var d,e,f,g,h,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:b&&b.data&&(apower.license.info=b.data.license_info,apower.user.info=b.data.user_info,d=b.data.app_info.name,e=b.data.app_info.id,this.urlInfo=b.data.url_info,apower.user.info.nickname||(apower.user.info.nickname=b.data.app_info.computer_name),this.isShowmoreApp?(f=b.data.user_info.identity_token,g=b.data.user_info.uid,this.loading=!0,a.post(this.showmoreBaseUrl,{identity_token:f,action:"do-login"},function(b){InvokeApp("update-app-passport-info",{data:b.data}),InvokeApp("get-passport-info",function(a){a&&a.data&&(this.showMoreUserInfo=a.data.user_info,this.urlInfo=a.data.url_info,this.showMoreUserInfo.nickname||(this.showMoreUserInfo.nickname=a.data.app_info.computer_name),this.showMoreAppLicense=a.data.app_vip_info,this.loading=!1)}.bind(this)),a.digest()}.bind(this))):this.isBackgroundEraserApp?(InvokeApp("debug",{info:"背景抠图逻辑开始"}),h=b.data.user_info.identity_token,i=b.data.user_info.uid,this.loading=!0,a.post(this.backgroundEraserBaseUrl+"/sessions",{identity_token:h},function(b){InvokeApp("update-app-passport-info",{data:b.data}),a.get(this.backgroundEraserBaseUrl+"/my/recharge?api_token="+b.data.user.api_token,function(b){this.backgroundEraserAppLicense=b.data.recharge,this.backgroundEraserUserInfo=b.data.recharge.userinfo,this.loading=!1,InvokeApp("debug",{info:this.backgroundEraserAppLicense}),a.digest()}.bind(this))}.bind(this))):this.isIosUnlockApp?this.updateIosUnlockLicenseInfo():this.loading=!1);case 1:case"end":return c.stop()}},c,this)}));return function(a){return b.apply(this,arguments)}}().bind(this)),a.nextTick(function(){e.tipWidth=a(".account-license-name").width()+80,e.tipHeight=a(".account-license-name").height()+60,e.tipArrowLeft=206+a(".account-license-name").width()/2,e.tipTextLeft=e.tipArrowLeft+50}),this.avatar=apower.user.getAvatar(),this.recommended){d.next=20;break}return d.next=19,apower.support.getFirstRecommendProduct();case 19:this.recommended=d.sent;case 20:if(c=this.user.info&&this.user.info.identity_token,!c){d.next=44;break}d.t0=c[c.length-1],d.next="1"===d.t0?25:"2"===d.t0?25:"3"===d.t0?25:"4"===d.t0?25:"5"===d.t0?27:"6"===d.t0?29:"7"===d.t0?31:"8"===d.t0?33:"9"===d.t0?35:"a"===d.t0?37:"b"===d.t0?39:"c"===d.t0?41:43;break;case 25:return this.accountPre="",d.abrupt("break",44);case 27:return this.accountPre="QQ-",d.abrupt("break",44);case 29:return this.accountPre="Weibo-",d.abrupt("break",44);case 31:return this.accountPre="WeChat-",d.abrupt("break",44);case 33:return this.accountPre="WeChatS-",d.abrupt("break",44);case 35:return this.accountPre="DingTalk-",d.abrupt("break",44);case 37:return this.accountPre="Google-",d.abrupt("break",44);case 39:return this.accountPre="Facebook-",d.abrupt("break",44);case 41:return this.accountPre="Twitter",d.abrupt("break",44);case 43:this.accountPre="";case 44:return d.next=46,apower.support.loadURLs();case 46:this.loading=!1;case 47:case"end":return d.stop()}},d,this)}));return b}(),updateIosUnlockLicenseInfo:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h,i,j,k,l;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.refreshing=!0,b=apower.user.info.identity_token,c=apower.user.info.uid,e=apower.user.info.ctoken,f="get-vip-extend-info",g="web-account",h=new Date-0,i=this.iosUnlockBaseUrl+"/api/client/index?type=6&identity_token="+b+"&uid="+c+"&ctoken="+e+"&product_name="+encodeURIComponent(this.product_name)+"&product_id="+this.product_id+"&action="+f+"&platform="+g+"&ts="+h,d.next=10,a.req.get(i);case 10:j=d.sent,k=j.ok,l=j.data,InvokeApp("decrypt-data",l,function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(a){var c;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:this.loading=!1,c=null;try{c=JSON.parse(a.data)}catch(d){}InvokeApp("debug",{info:c}),1===c.status?(this.iosUnlockAppLicense=c.data.license_info,InvokeApp("update-app-passport-info",{data:c.data.license_info})):this.licenseInput.setErrorMessage(this.getErrorMsg(c.data.error_code)),this.refreshing=!1;case 6:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}().bind(this));case 14:case"end":return d.stop()}},d,this)}));return b}(),getName:function(){return this.isGemsoft?this.app_info.computer_name:this.user.getName()},gotoBuy:function(){var a=apower;a.license;this.recommended&&this.recommended.buy_url&&(apower.app&&"software"===apower.app.env?InvokeApp("open-file",{file:this.recommended.buy_url}):window.location=this.recommended.buy_url)},gotoRecommended:function(){var a=apower;a.license;this.recommended&&this.recommended.product_url&&(apower.app&&"software"===apower.app.env?InvokeApp("open-file",{file:this.recommended.product_url}):window.location=this.recommended.product_url)},gotoFaq:function(){var a=apower;a.license;return this.isMairuan&&this.faqLink?(InvokeApp("open-file",{file:this.faqLink}),!1):void(this.support.urls&&this.support.urls.faq&&(apower.app&&"software"===apower.app.env?InvokeApp("open-file",{file:this.support.urls.faq}):window.location=this.support.urls.faq))},parseTime:function(a){if(a>0){var b=new Date;b.setTime(1e3*a);var c=b.getFullYear(),d=b.getMonth()+1;d=10>d?"0"+d:d;var e=b.getDate();e=10>e?"0"+e:e;var f=b.getHours();f=10>f?"0"+f:f;var g=b.getMinutes(),h=b.getSeconds();return g=10>g?"0"+g:g,h=10>h?"0"+h:h,c+"-"+d+"-"+e}return""},gotoForum:function(){var a=apower;a.license;return this.isMairuan&&this.forumLink?(InvokeApp("open-file",{file:this.forumLink}),!1):void(this.support.urls&&this.support.urls.forum&&(apower.app&&"software"===apower.app.env?InvokeApp("open-file",{file:this.user.addTokenToURL(this.support.urls.forum)}):window.location=this.user.addTokenToURL(this.support.urls.forum)))},gotoFindVip:function(){var a=void 0;a=apower.app&&apower.app.isAceThinker?this.user.addTokenToURL("https://acethinker.com/support/contact-us"):this.user.addTokenToURL(apower.getDomain(apower.lang)+"/support/retrieve-vip/"),apower.app&&"software"===apower.app.env?InvokeApp("open-file",{file:a}):window.location=a},gotoGemsoftStore:function(){var a=void 0;a="jp"===this.lang?"https://www.gemsoft.jp/vpb/jp10":"https://www.gemsoft.jp/vpb/en10",InvokeApp("open-file",{file:a})},activate:function(){var a=apower;a.license;apower.app&&"software"===apower.app.env&&InvokeApp("resize-window",{width:400,height:500}),this.route["goto"]("/activate")},toMyAccount:function(){var b=apower,c=b.user;b.license;if(apower.app&&"software"===apower.app.env){var d=a.useQuery(apower.getMyAccountDomain(),{lang:apower.lang});InvokeApp("open-file",{file:c.addTokenToURL(d)})}else this.route["goto"]("/")},toChangePassword:function(){var b=apower,c=b.user,d=(b.license,a.useQuery(apower.getMyAccountDomain(),{lang:apower.lang,init:"change-password"}));apower.app&&"software"===apower.app.env?InvokeApp("open-file",{file:c.addTokenToURL(d)}):window.location=apower.getMyAccountDomain()+"/change-password?lang="+apower.lang},getPassportLicenseText:function(){return e(this.PASSPORT_LICENSE_TYPE_TEXT[this.showMoreAppLicense.vip_type])},getBackgroundEraserLicenseText:function(){return e(this.PASSPORT_LICENSE_TYPE_TEXT[this.backgroundEraserAppLicense.vip])},refresh:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=apower,b=a.user,d=a.license,this.refreshing=!0,c.next=4,this.support.post("get-user-license-info",{data:{product_name:this.product_name,guid:this.guid}});case 4:e=c.sent,f=e.ok,g=e.data,apower.app&&"software"===apower.app.env&&InvokeApp("update-passport-info",{data:{license_info:g.license_info?Object.assign(apower.license.info,g.license_info):apower.license.info,user_info:g.user_info?Object.assign(apower.user.info,g.user_info):apower.user.info}}),d.set(g.license_info),this.refreshing=!1;case 10:case"end":return c.stop()}},c,this)}));return a}(),onClickBuy:function(){var a=apower,b=a.user,c=a.license,d=a.support,e=c.isActivated()||c.isExpired(),f=e?d.urls.renew:d.urls.order;f=apower.app&&"software"===apower.app.env?e?this.urlInfo.renew:this.urlInfo.order:e?d.urls.renew:d.urls.order,f=b.addTokenToURL(f),apower.app&&"software"===apower.app.env?(InvokeApp("open-file",{file:f}),InvokeApp("activate-vip",{})):window.open(f)},getExpiredText:function(){var a=apower,b=a.license,c=b.getExpiredDate(),d=b.isExpired();if(d)return e("Expired@@001234");var f=b.getRemainingDays();return b.isNearlyExpired()?e("{0} days later@@001235").format(f):c.replace(/ .+/,"")},logout:function(){var a=apower,b=a.user;a.license;b.logout(),apower.app&&"software"===apower.app.env?(InvokeApp("resize-window",{width:400,height:500}),this.route["goto"]("/login"),InvokeApp("update-passport-info",{data:{}})):(apower.app&&apower.app.isFromSoftware&&apower.app.returnToSoftware("logout"),this.route["goto"]("/login"))},getActivateText:function(){return"jp"===this.lang?"延長ライセンスのアクティベーション":"Activate Extention License"},getGemsoftStoreText:function(){return"jp"===this.lang?"延長ライセンスのご購入":"Purchase Extention License"}}),a.registerComponent("activate","account-win",{template:'\n		<div class="win account-win form">\n			<div class="form-title">Input activation code@@001427</div>\n\n			<myform @submit="submit" :messages="messages" :validators="validators" f-ref="form" style="margin-top: 30px;">\n				<myfield class="form-field" :messages="codeMessages" f-ref="licenseInput" :validators="codeValidators" :rules="[\'required\', \'pattern\', \'-1\']">\n					<input type="text" name="license_code" placeholder="XXXXX-XXXXX-XXXXX-XXXXX">\n				</myfield>\n\n				<div class="form-desc">Input the activation code in the mail to activate the software.@@001191</div>\n				<div class="form-desc" f-if="!showGemsoftText">\n					{No activation code?@@001211}\n					<a @click="gotoBuy" target="_blank">Buy now@@001188</a>\n                </div>\n                \n                <div class="form-desc" f-if="showGemsoftText">\n                    アクティベーションコードを持っていない ⇒ 		\n					<a @click="gotoBuy" target="_blank">［今すぐ購入］</a>\n                </div>\n\n				<div class="form-submit" f-loading="loading" style="margin-top: 40px;">\n					<input type="submit" value="{OK@@001410}">\n				</div>\n			</myform>\n		</div>\n	',codeMessages:{required:e("Please input activation code@@001236"),pattern:e("Invalid activation code@@001237"),"-1":e("Invalid activation code@@001237"),"-2":e("Activations overrun@@001238"),"-3":e("The license has expired@@001239")},codeValidators:{pattern:function(a){return/^\w{5}-\w{5}-\w{5}-\w{5}$/.test(a.trim())}},polling:null,loading:!1,urlInfo:null,isGemsoft:!1,product_name:null,showGemsoftText:!1,onCreated:function(){this.user=apower.user,this.license=apower.license,this.support=apower.support,apower.support.urls||apower.support.loadURLs(),InvokeApp("get-passport-info",function(a){this.product_name=a.data.app_info.name,this.product_name&&0===this.product_name.toLowerCase().indexOf("gemsoft")&&(this.isGemsoft=!0,"jp"===apower.lang&&(this.showGemsoftText=!0))}.bind(this))},onReady:function(){},gotoBuy:function(){apower.app&&"software"===apower.app.env?InvokeApp("get-passport-info",function(a){a&&a.data&&(this.urlInfo=a.data.url_info),this.urlInfo&&InvokeApp("open-file",{file:this.urlInfo.order})}.bind(this)):this.support.urls&&this.support.urls.order&&window.open(this.support.urls.order)},getErrorMsg:function(a){return-1==a?e("Invalid activation code@@001237"):-2==a?e("Activations overrun@@001238"):-3==a?e("The license has expired@@001239"):e("An unknown error occurred@@001215")+" "+a},showError:function(b){-1==b?a.notify.alert(e("Invalid activation code@@001237")):-2==b?a.notify.alert(e("Activations overrun@@001238")):-3==b?a.notify.alert(e("The license has expired@@001239")):a.notify.alert(e("An unknown error occurred@@001215")+" "+b)},submit:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,f,g,h,i;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(b=apower,c=b.license,f=b.user,g=b.route,this.loading=!0,this.polling&&(clearInterval(this.polling),this.polling=null),jQuery(".form-submit .loading").show(),!apower.app||"software"!==apower.app.env){d.next=8;break}g.isActivateWithoutLogin||this.isGemsoft?(InvokeApp("debug",{info:"未登录激活开始"}),InvokeApp("activate-key",{key:this.form.getFieldValue("license_code"),func:""},function(b){0===b.status&&"verifying"===b.message?this.polling=setInterval(function(){InvokeApp("get-activate-key",{key:this.form.getFieldValue("license_code"),func:""},function(b){var d=this;InvokeApp("debug",{data:{status:b.status}}),0!==b.status&&(a.nextTick(function(){d.loading=!1,clearInterval(d.polling),d.polling=null}),b.data&&b.data.activate_key_info&&1===b.data.activate_key_info.is_activated?(c.info=b.data.activate_key_info,InvokeApp("update-passport-info",{data:{license_info:c.info?c.info:{},user_info:f.info?f.info:{}}}),InvokeApp("resize-window",{width:400,height:500}),apower.route["goto"]("/congrats-activated")):this.licenseInput.setErrorMessage(e("Invalid activation code@@001237")))}.bind(this))}.bind(this),1e3):this.showStatusError()}.bind(this))):(InvokeApp("debug",{info:"登录激活开始"}),InvokeApp("get-passport-info",{},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(a){var d,e,g,h,i,j;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d=a.data.app_info.guid,e=c.productName,g=c.productId,b.next=5,c.post("identity-client-login",{identity_token:f.getToken(),product_name:e,product_id:g,guid:d});case 5:return h=b.sent,i={guid:a.data.app_info.guid,product_name:a.data.app_info.name,ctoken:a.data.user_info.ctoken,license_code:this.form.getFieldValue("license_code"),uid:a.data.user_info.uid},b.next=9,c.post("activate-product",i);case 9:j=b.sent,InvokeApp("decrypt-data",j.data,function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function b(a){var d;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:this.loading=!1,d=null;try{d=JSON.parse(a.data)}catch(e){}1===d.status?(c.info=d.data.license_info,f.info=d.data.user_info,this.onActivateSuccess()):this.licenseInput.setErrorMessage(this.getErrorMsg(d.data.error_code));case 4:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}().bind(this));case 11:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}().bind(this))),d.next=14;break;case 8:return h={guid:c.guid,product_name:c.productName,license_code:this.form.getFieldValue("license_code")},d.next=11,c.accountPost("activate-product",h);case 11:i=d.sent,"success"===i.data.info?(c.info=i.data.license_info,f.info=i.data.user_info,apower.app.returnToSoftware("activate",i)):this.licenseInput.setErrorMessage(this.getErrorMsg(i.data.data.error_code)),this.loading=!1;case 14:case"end":return d.stop()}},d,this)}));return b}(),onActivateSuccess:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=apower,d=b.license,e=b.user,apower.app&&"software"===apower.app.env?(InvokeApp("update-passport-info",{data:{license_info:d.info?d.info:{},user_info:e.info?e.info:{}}}),d.isActivated()?(InvokeApp("resize-window",{width:400,height:500}),this["goto"]("/congrats-activated")):(InvokeApp("resize-window",{width:690,height:413}),this["goto"]("/account"))):this["goto"]("/congrats-activated");case 2:case"end":return a.stop()}},c,this)}));return a}()}),a.register("congrats-activated","account-win",{template:'\n		<div class="win account-win congrats form">\n			<div class="congrats-icon congrats-icon-vip"></div>\n			<div class="congrats-title">Your software has been activated@@001192</div>\n			<button type="primary" class="primary-button" @click="toMyAccount()" style="margin-top: 90px;">OK@@001410</button>\n		</div>\n    ',onCreated:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.user=apower.user;case 1:case"end":return a.stop()}},c,this)}));return a}(),toMyAccount:function(){var a=apower;a.license;apower.app&&"software"===apower.app.env?(InvokeApp("resize-window",{width:690,height:413}),apower.route["goto"]("/account")):apower.route["goto"]("/account")}}),a.register("congrats-registered","account-win",{template:'\n        <div class="win account-win congrats form">\n			<div class="congrats-icon congrats-icon-registered"></div>\n            <div class="congrats-title">You have completed the registration@@001196</div>\n			<div>\n                <div class="congrats-desc">You can close the page and continue using software@@001429</div>				\n                <button style="margin-top: 23px;" f-if="!isInSoftware" class="primary-button" @click="closePage">Close@@001198</button>\n                <button style="height: 18px;line-height: 16px;margin-top: 23px;background-color: transparent;color: #478afb;" class="primary-button" @click="goToMyAccount">Go to Account Center@@001424</button>\n            </div>\n		</div>\n	',isOldIEVersion:!1,isInSoftware:!1,isFromSoftware:!1,onCreated:function(){var a=apower,b=a.license;this.isOldIEVersion=b.isOldIEVersion(),this.isInSoftware=apower.app&&"software"===apower.app.env,this.isFromSoftware=apower.app&&apower.app.isFromSoftware},goToMyAccount:function(){var a=apower;a.license;apower.app&&"software"===apower.app.env?(InvokeApp("resize-window",{width:690,height:413}),apower.route["goto"]("/account")):window.location=apower.getMyAccountDomain()+"?lang="+apower.lang},closePage:function(){a.env.isIE?(window.opener=null,window.open("","_self"),window.close()):window.location.href="about:blank"}}),a.register("congrats-logined","account-win",{template:'\n		<div class="win account-win congrats form">\n			<div class="congrats-icon congrats-icon-registered"></div>\n            <div class="congrats-title">You have completed the login!@@001428</div>\n			<div>\n                <div class="congrats-desc">You can close the page and continue using software@@001429</div>				\n                <button style="margin-top: 23px;" f-if="!isInSoftware" class="primary-button" @click="closePage">Close@@001198</button>\n                <button style="height: 18px;line-height: 16px;margin-top: 23px;background-color: transparent;color: #478afb;" class="primary-button" @click="goToMyAccount">Go to Account Center@@001424</button>\n            </div>\n		</div>\n	',isInSoftware:!1,onCreated:function(){var a=apower;a.license;this.isInSoftware=apower.app&&"software"===apower.app.env},goToMyAccount:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=apower,b=a.license,d=a.user,e=apower.user.inMyAccountDomain?location.origin+apower.getRegionPath():location.href,!apower.app||"software"!==apower.app.env){c.next=7;break}InvokeApp("resize-window",{width:690,height:413}),apower.route["goto"]("/account"),c.next=10;break;case 7:return c.next=9,d.handleAutoLogin();case 9:apower.route["goto"]("/");case 10:case"end":return c.stop()}},c,this)}));return a}(),closePage:function(){a.env.isIE?(window.opener=null,window.open("","_self"),window.close()):window.location.href="about:blank"}}),a.registerComponent("buyWin","win",{template:'\n        <div class="win buy-win">\n            <h2 class="title">\n                <span>{{title}}</span>\n            </h2>\n            <div class="pay-on-mobile">\n                <div class="mv-coin">\n                    <span class="mv-coin-num"  f-html="getCoiniText()">\n                    </span>\n                    <span class="mv-coin-consumption"><a @click="goToAccount">Account Detail@@002504</a></span>\n                </div>\n                <div class="products-list">\n                    <div f-for="product of lightmvProducts" class="card" @click="setActiveProduct(product[\'product_id\'])" :class.active="active_product == product[\'product_id\']">\n                        <div class="top">\n                            <p class="count"><span>{{product[\'mv_coin_num\']}}</span>&nbsp;<span>糖币@@002426</span></p>\n                            <p class="giveaway" :class.none="product[\'gift_num\']?false:true">{{getGiftText(product)}}</p>\n                        </div>\n                        <p class="price" f-if="product[\'price\']"><span>{{intUnit(product[\'price\'])}}</span><span>{{intPrice(product[\'price\'])}}</span></p>\n                        <div class="check"></div>\n                    </div>\n                </div>\n                \n                <p class="agreement" f-html="getAgreementText()"></p>\n                <div class="pay" f-if="isLogined">\n                    <div class="coupon" f-if="isCn">\n                        <p f-if="!show_coupon_input" @click="showCouponInput()">使用优惠券@@002427</p>\n                        <input placeholder="请输入优惠券" class="coupon-input" f-if="show_coupon_input" minlength="4" maxlength="10" f-model="coupon" type="text" />\n                        <span f-if="show_coupon_input" :class.active="isValidCoupon()" @click="useCoupon()">确定@@002428</span>\n                        <div class="coupon-error" f-if="couponError">{{couponError}}</div>\n                    </div>\n                    <div class="qr-code" f-if="isCn">\n                        <div class="container" f-loading="isGeneratingOrder || !qrcode()">\n                            <div class="img">\n                                <div f-if="qrcode()">\n                                    <img :src="qrcode()" />\n                                    <p><span class="weixin">微信</span><span class="alipay">支付宝</span></p>\n                                </div>\n                            </div>\n                            <div class="invoice" f-if="payInfos">\n                                <p class="content">应付金额：<span><span>￥</span>{{invoiceAmount()}}</span><span f-if="coupon && reduce > 0" class="reduce">({{getReduce()}})</span></p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="tip-mobile">\n                        <span>提示：@@002429</span>\n                        <ol>\n                            <li>1. 糖币可用于购买右糖平台的各项服务（提高素材上限，下载高清视频等）。@@002554</li>\n                            <li>2. 糖币为虚拟币，购买的糖币只可消费，不退余币;  糖币不会过期，但无法提现或转赠他人。@@002555</li>\n                            <li>3. 如遇网站故障，可申请退款。@@002556</li>\n                        </ol>\n                    </div>\n                    <p class="agreement" f-html="getAgreementText()"></p>\n                    <div class="pay-link" f-if="!isCn">\n                        <span class="btn" @click="openBuy()">Click to buy@@002502<span>&nbsp;&nbsp;{{intUnit(amount)}}</span><span>{{intPrice(amount)}}</span></span>\n                    </div>\n                    <table>\n                        <tr>\n                            <td class="tip">提示：@@002429</td>\n                            <td>1. 糖币可用于购买右糖平台的各项服务（提高素材上限，下载高清视频等）。@@002554</td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td>2. 糖币为虚拟币，购买的糖币只可消费，不退余币;  糖币不会过期，但无法提现或转赠他人。@@002555</td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td>3. 如遇网站故障，可申请退款。@@002556</span></td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n            \n        </div>\n    ',title:apower.tr("糖币不足，请先购买糖币哦@@002433"),productsList:[],show_coupon_input:!1,active_pay_method:"alipay_wxpay_qr",active_product:null,checked_product:"first",timeout:null,coupon:null,couponError:null,isCounponValidated:!1,lightmvProducts:[{},{},{}],payInfos:null,language:null,loading:!1,isCn:!1,queryInterval:null,autoDestroy:!0,reduce:0,loadingPayInfo:!1,isLogined:!1,isGeneratingOrder:!1,abort:null,mv_coin:0,onCreated:function(){var b=this;this.mv_coin=a.store.get("account-data")?a.store.get("account-data").mv_coin:0,this.isLogined=apower.user.isLogined(),this.language=apower.lang,this.getLightmvProducts(),apower.user.on("logined",this.getLightmvProducts,this),this.isCn="zh"===this.language,this.on("hide",function(){b.queryInterval&&(window.clearTimeout(b.queryInterval),b.queryInterval=null)});try{var c=document.createEvent("Event");c.initEvent("wx_update_track",!0,!0),c.args={append_referer:!0},window.dispatchEvent(c)}catch(d){console.log(d)}},getCoiniText:function(){return apower.tr("{0}糖币：{1} {2}{3}{4}个@@002432","<span>","</span>","<span>",""+this.mv_coin,"</span>")},getReduce:function(){var a=this,b=this.invoiceAmount(),c=this.lightmvProducts.find(function(b){return b.product_id===a.active_product});if(c){var d=c.price.replace(/[^0-9\.]/gi,"");return this.reduce=Math.ceil(100*d-100*b)/100,apower.tr("已优惠{0}@@002434",""+this.reduce)}return null},getAgreementText:function(){var a="zh"===apower.lang?"https://lightmv.cn/deposit":"https://lightmv.com/deposit";return apower.tr("购买即同意{0}购买协议{1}@@002435",'<a target="_blank" href="'+a+'">',"</a>")},getGiftText:function(a){return a.gift_num?apower.tr("赠送{0}糖币@@002436",""+a.gift_num):apower.tr("无赠送@@002505")},"int":function(a){return a?a.substring(0,a.lastIndexOf(".")>-1?a.lastIndexOf("."):a.length):""},intUnit:function(a){return a?a.substring(0,1):""},intPrice:function(a){return a?a.substring(1,a.lastIndexOf(".")>-1?a.lastIndexOf("."):a.length):""},openBuy:function(){var a=this;this.lightmvProducts&&this.active_product&&(window.open(this.lightmvProducts.find(function(b){return b.product_id===a.active_product}).buy_url),this.queryVipStatus())},goToAccount:function(){a.newComponent("account-detail",{target:a("body")}).show()},queryVipStatus:function(){var b=this;this.hide();var c=a.store.get("lightmvVipInfo")||a.store.get("account-data"),d=a.newComponent("lightmv-pay-status-win");d.payurl=this.lightmvProducts.find(function(a){return a.product_id===b.active_product}).buy_url,d.currentCoin=c.mv_coin,d.show()},showCouponInput:function(){var b=this;this.show_coupon_input=!0,a.nextTick(function(){b.el.find(".coupon-input").focus()})},useCoupon:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.abort&&this.abort(),a=apower,b=a.license,this.couponError=null,d=[{product_id:this.active_product,quantity:1}],!(this.coupon&&this.coupon.length>3)){c.next=14;break}return c.next=7,b.buyPost("query_coupon",{coupon_code:this.coupon,product:d,type:"attachment",nocache:1});case 7:e=c.sent,f=e.ok,g=e.data,-1===g.data.error_code?this.couponError=apower.tr("产品id有误@@002437"):-2===g.data.error_code?this.couponError=apower.tr("无效优惠码@@002438"):-3===g.data.error_code?this.couponError=apower.tr("此优惠券不能使用当前产品@@002439"):1==g.status&&(this.couponError=null,this.isCounponValidated=!0),this.generateOrders(),c.next=15;break;case 14:this.coupon?this.coupon.length<4&&(this.couponError=apower.tr("无效优惠码@@002438")):this.couponError=apower.tr("请输入优惠码@@002440");case 15:case"end":return c.stop()}},c,this)}));return a}(),getLightmvProducts:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.loading=!0,b="zh"===this.language?"Apowersoft-CN":"Avangate",d.next=4,a.req.get(a.useQuery("https://apilightmv.aoscdn.com/api/coins/products",{language:this.language,platform:b}));case 4:c=d.sent,e=c.ok,f=c.data,this.lightmvProducts=f.data&&f.data.coin_product,this.loading=!1,this.active_product=this.lightmvProducts[1].product_id,this.amount=this.lightmvProducts[1].price,this.isLogined&&this.generateOrders();case 12:case"end":return d.stop()}},d,this)}));return b}(),generateOrders:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e,f,g,h,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.isCn){c.next=2;break}return c.abrupt("return");case 2:for(this.isGeneratingOrder=!0,a=apower,b=a.license,window.clearTimeout(this.queryInterval),this.queryInterval=null,d=[],e=0,f=this.lightmvProducts.length;f>e;e++)d.push({product_id:this.lightmvProducts[e].product_id,quantity:1});return c.next=10,b.buyPost("generate_order",{coupon_code:this.isCounponValidated?this.coupon:null,product:d,type:"attachment",nocache:1});case 10:g=c.sent,h=g.ok,i=g.data,this.isGeneratingOrder=!1,h&&(this.payInfos=i.data,this.queryOrderStatus());case 15:case"end":return c.stop()}},c,this)}));return a}(),queryOrderStatus:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){
var b,c,e,f,g,h,i,j,k,l,m=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=apower,c=b.license,e=b.user,f=this.payInfos.find(function(a){return a.product_id===m.active_product}),g=f.transaction_id,d.next=5,a.req.post("https://support.aoscdn.com/api/buy/apowersoft?action=query_order_status",{transaction_id:g,nocache:1,language:"zh",identity_token:e.identityToken},{getAbort:function(a){m.abort=a}});case 5:h=d.sent,i=h.ok,j=h.data,j&&j.data&&(k=j.data.order_detail,l=k.transaction_status,"unpaid"===l?this.queryInterval=window.setTimeout(function(){m.queryOrderStatus()},2e3):"complete"===l?(a.msg.success(apower.tr("Payment success!@@001542")),window.clearTimeout(this.queryInterval),this.queryInterval=null,apower.user.trigger("updateLightmvVipInfo")):"refund"===l?(a.msg.error(apower.tr("订单已退款@@002441")),window.clearTimeout(this.queryInterval),this.queryInterval=null):"closed"===l&&(a.msg.error(apower.tr("订单关闭@@002442")),window.clearTimeout(this.queryInterval),this.queryInterval=null));case 9:case"end":return d.stop()}},d,this)}));return b}(),isValidCoupon:function(){return this.coupon&&this.coupon.length>3},setActiveProduct:function(a){a!==this.active_product&&(this.queryInterval&&(window.clearTimeout(this.queryInterval),this.queryInterval=null),this.reduce=0,this.active_product=a,this.abort&&this.abort(),this.clearCoupon(),this.queryOrderStatus())},clearCoupon:function(){var a=this,b=this.lightmvProducts.find(function(b){return b.product_id===a.active_product});this.amount=b.price},invoiceAmount:function(){var a=this;if(this.payInfos){var b=this.payInfos.find(function(b){return b.product_id===a.active_product});return b.invoice_amount&&b.invoice_amount.replace(".00","")}return null},qrcode:function(){var a=this;if(this.payInfos){var b=this.payInfos.find(function(b){return b.product_id===a.active_product});return b.transaction_id&&"https://support.aoscdn.com/api/buy/apowersoft?action=pay&transaction_id="+b.transaction_id+"&payment_method="+this.active_pay_method}return null}}),a.registerComponent("lightmv-pay-status-win","win",{template:'\n	<div class="win pay-status-win">\n		<div class="win-body">\n			<div f-show="status === \'init\'">\n				<p class="pay-status-title">Please finish the payment in the new window@@001538</p>\n				<p class="pay-status-text">Please don’t close this window until the payment is done@@001539</p>\n				<p class="pay-status-text">Please click the button below basing on your situation after the payment@@001540</p>\n			</div>\n			<div class="pay-status-query" f-show="status === \'query\'">\n				<div class="pay-count-down">{{countDown}}s</div>\n				<p class="pay-status-text">{Inquiring your payment information...@@001546}</p>\n			</div>\n			<div class="pay-status-fail" f-show="status === \'fail\'">\n				<p class="pay-status-text">Thanks for your report!@@001541</p>\n			</div>\n			<div class="pay-status-success" f-show="status === \'success\'">\n				<p class="pay-status-text">Payment Success!@@001542</p>\n			</div>\n			<div class="pay-status-btns">\n				<button class="pay-status-btn btn-done" f-show="status === \'init\'" @click="donePay">Payment is done@@001543</button>\n				<button class="pay-status-btn btn-done" f-show="status === \'fail\'" @click="donePay">Requery@@001544</button>\n				<a class="pay-status-btn btn-again" f-show="status !== \'success\'" @click="payAgain" :href="payurl" target="_blank">Pay again@@001545</a>\n			</div>\n		</div>\n	</div>\n	',currentCoin:null,status:"init",payurl:"",queryPayTimer:null,countDown:60,init:function(){},donePay:function(){this.changeStatus("query"),this.startQuery()},startQuery:function(){var b=this;this.countDown=60,this.queryPayTimer=window.setInterval(function(){b.countDown%5===0&&b.queryPay(),b.countDown-=1,0===b.countDown&&(b.clearIntervalQueryPay(),b.changeStatus("fail")),a.digest()},1e3)},queryPay:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=a.store.get("lightmvAccountInfo")||a.store.get("account-data"),d.next=3,a.req.get(a.useQuery("https://apilightmv.aoscdn.com/api/my/vip",{api_token:b.api_token}));case 3:c=d.sent,e=c.ok,f=c.data,f.data&&f.data.vip&&(g=f.data.vip,g.mv_coin>this.currentCoin&&this.paySuccess());case 7:case"end":return d.stop()}},d,this)}));return b}(),paySuccess:function(){this.clearIntervalQueryPay(),this.destroy(),a.msg.success(apower.tr("Payment success!@@001542"))},payAgain:function(){this.changeStatus("init"),this.clearIntervalQueryPay()},changeStatus:function(b){this.status=b,a.digest()},onHide:function(){this.clearIntervalQueryPay(),this.destroy()},clearIntervalQueryPay:function(){window.clearInterval(this.queryPayTimer)}}),a.registerComponent("serviceWin","win",{template:'\n        <div class="win service-win">\n            <h2 class="title">\n                <span>{{title()}}</span>\n            </h2>\n            <p class="coin-count" f-if="lightmvVipInfo" f-html="getCoiniText()"></p>\n            <div class="service-list" f-loading="!serviceList">\n                <div class="container" f-if="serviceList">\n                    <div \n                        f-for="service of serviceList" \n                        @click="setActiveServie(service[\'type\'])" \n                        :class.active="activeService == service[\'type\']"\n                        :class.disable="isDisable(service)"\n                    >\n                        <div class="top">\n                            <p class="count"><span>{{service[\'type\']}}</span></p>\n                        </div>\n                        <p class="price"><span>{{service[\'coin_price\']}}</span></p>\n                        <div class="check"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="not-enough" f-if="getWarningText()">\n                <span f-html="getWarningText()"></span>\n            </div>\n            <div class="buttons">\n                <button class="primary" @click="buy">购买糖币@@002424</button>\n                <button @click="submit">立即提高@@002462</button>\n            </div>\n            <ul class="info" f-if="serviceType === \'priority_make_num\'">\n                <li>购买之后，您制作中的视频会进入优先制作序列！@@002463</li>\n                <li>此项可累加！@@002464</li>\n            </ul>\n            <ul class="info" f-if="serviceType === \'video_limit_num\'">\n                <li>购买之后，您的账户下可以保留更多视频！@@002465</li>\n                <li>此项可累加！@@002464</li>\n            </ul>\n            <ul class="info" f-if="serviceType === \'task_limit_num\'">\n                <li>购买之后，您可以同时制作多个视频！@@002466</li>\n                <li>此项不可累加！@@002467</li>\n            </ul>\n        </div>\n    ',serviceType:null,serviceList:null,servicePrice:null,activeService:null,language:null,lightmvVipInfo:null,showWarning:!1,onCreated:function(){this.language=apower.lang,this.getServicePrice(),this.lightmvVipInfo=a.store.get("lightmvVipInfo")||a.store.get("account-data")},isDisable:function(a){return"task_limit_num"===this.serviceType&&!(this.lightmvVipInfo&&this.lightmvVipInfo.task_limit_num<a.type)},getWarningText:function(){var a=void 0;if(!this.serviceList||0===this.serviceList.length)return null;for(var b=0,c=this.serviceList.length;c>b;b++)this.serviceList[b].type===this.activeService&&(a=this.serviceList[b].coin_price);return this.lightmvVipInfo.mv_coin<a?apower.tr("您还差{0}个糖币哦，请先购买糖币！@@002479",""+parseInt(a-this.lightmvVipInfo.mv_coin)):null},getCoiniText:function(){return apower.tr("{0}糖币：{1} {2}{3}{4}{5}个{6}@@002472",'<span class="label">',"</span>",'<span class="count">',""+this.lightmvVipInfo.mv_coin,"</span>","<span>","</span>")},getServicePrice:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,a.req.get(a.useQuery("https://apilightmv.aoscdn.com/api/coins/service-price",{language:this.language}));case 2:if(b=d.sent,c=b.ok,e=b.data,!c){d.next=20;break}if(this.servicePrice=e&&e.data.service_price,this.serviceList=this.servicePrice[this.serviceType],"task_limit_num"===this.serviceType){d.next=12;break}this.activeService=this.serviceList[0].type,d.next=20;break;case 12:f=0,g=this.serviceList.length;case 13:if(!(g>f)){d.next=20;break}if(!(this.serviceList[f].type>this.lightmvVipInfo.task_limit_num)){d.next=17;break}return this.activeService=this.serviceList[f].type,d.abrupt("break",20);case 17:f++,d.next=13;break;case 20:case"end":return d.stop()}},d,this)}));return b}(),buy:function(){if(a.env.isMobile)window.open(apower.user.addTokenToURL(apower.getLightmvMobileDomain()+"/#/buy-token"));else{this.hide();var b=a.newComponent("buyWin");b.title=apower.tr("购买糖币@@002424"),b.show()}},submit:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h,i,j;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:for(b=void 0,c=0,e=this.serviceList.length;e>c;c++)this.serviceList[c].type===this.activeService&&(b=this.serviceList[c].coin_price);if(f=a.store.get("lightmvAccountInfo")||a.store.get("account-data"),!(this.lightmvVipInfo.mv_coin<b)){d.next=7;break}a.env.isMobile?window.open(apower.user.addTokenToURL(apower.getLightmvMobileDomain()+"/#/buy-token")):(this.hide(),g=a.newComponent("buyWin"),g.title=apower.tr("糖币不足！请先购买糖币哦！@@002473"),g.show()),d.next=14;break;case 7:return d.next=9,a.req.post("https://apilightmv.aoscdn.com/api/coins/consumes/",{api_token:f.api_token,consume_type:this.serviceType,num:this.activeService});case 9:h=d.sent,i=h.ok,j=h.data,this.hide(),i?(apower.user.trigger("updateLightmvVipInfo"),a.msg.success(apower.tr("购买成功@@002474"))):a.msg.error(apower.tr("购买失败@@002475"));case 14:case"end":return d.stop()}},d,this)}));return b}(),setActiveServie:function(a){if("task_limit_num"!==this.serviceType)this.activeService=a;else{if(!(this.lightmvVipInfo&&this.lightmvVipInfo.task_limit_num<a))return;this.activeService=a}},title:function(){return"priority_make_num"===this.serviceType?apower.tr("优先制作次数@@002476"):"video_limit_num"===this.serviceType?apower.tr("保留视频个数上限@@002477"):"task_limit_num"===this.serviceType?apower.tr("同时提交制作任务数上限@@002478"):void 0}}),a.getComponent("icon").extendSymbols({"menu-account":'		<svg viewBox="0 0 17.1 18">			<circle style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" cx="8.7" cy="6" r="5"/>			<path style="stroke-width:2;stroke-linecap:round;" d="M1,17c0,0,0.8-5.5,5.4-6.4"/>			<path style="stroke-width:2;stroke-linecap:round;" d="M13.4,12.1c0,0,2.3,1.1,2.7,4.9"/>			<path style="stroke-linecap:round;stroke-linejoin:round;" d="M7.7,3.6c0,0-1.7,0.6-1.7,2.9"/>		</svg>    ',"menu-token":'        <svg viewBox="0 0 27.2 28.24">            <defs>                <linearGradient id="transition-1" x1="1855.76" y1="420.04" x2="1863.47" y2="420.04" gradientUnits="userSpaceOnUse">                    <stop offset="0" stop-color="#ffb6de" />                    <stop offset="1" stop-color="#feb6de" />                </linearGradient>                <linearGradient id="transition-2" x1="0" y1="14.25" x2="23.4" y2="14.25" />            </defs>            <path style="fill: #e5f1fa;" d="M1855,413.79c-.21.19-.42.39-.64.56l-.07-.07C1854.56,414.12,1854.8,414,1855,413.79Z" transform="translate(-1837.84 -395.55)" />            <path style="fill: #ff6687;" d="M1861,399.29c-.24-.84-.26-3.73,1.28-3.74a1.23,1.23,0,0,1,1.13,1.25v.42h.42a1.23,1.23,0,0,1,1.25,1.13c0,1.54-2.91,1.53-3.74,1.28l-.28-.06Z" transform="translate(-1837.84 -395.55)" />            <path style="fill: url(#transition-1);" d="M1863,423.3a1.67,1.67,0,0,1-1.18.49,1.69,1.69,0,0,1-1.19-.49l-3.17-3.16-1.68-1.68a13.6,13.6,0,0,0,2.58-2.16l4.64,4.64A1.67,1.67,0,0,1,1863,423.3Z" transform="translate(-1837.84 -395.55)" />            <path style="fill: #ffe4f5;" class="cls-4" d="M1853.59,419.22a10.25,10.25,0,1,1-4-19.66,10.21,10.21,0,0,1,4,.83,10.25,10.25,0,0,0,0,18.82Z" transform="translate(-1837.84 -395.55)" />            <path style="fill: none;stroke-linecap: round;stroke-linejoin: round;stroke: #f15456;" d="M1858.11,416a9.33,9.33,0,0,1-13.19,0,7.46,7.46,0,0,1,0-10.55,6,6,0,0,1,8.44,0,4.78,4.78,0,0,1,0,6.75,3.82,3.82,0,0,1-5.4,0,3.06,3.06,0,0,1,0-4.32,2.45,2.45,0,0,1,3.46,0,2,2,0,0,1,0,2.77,1.57,1.57,0,0,1-2.21,0,1.25,1.25,0,0,1,0-1.77" transform="translate(-1837.84 -395.55)" />            <path style="fill: #e5f1fa;" d="M1857.77,401.74a11.52,11.52,0,0,1-.44,15.45,10.73,10.73,0,0,1-2,1.71,11.54,11.54,0,0,1-13.82-.87,11.54,11.54,0,0,0,15.14,2.19,10.73,10.73,0,0,0,2-1.71,11.53,11.53,0,0,0-.88-16.77Z" transform="translate(-1837.84 -395.55)" />            <path style="fill: #ffdee3;" d="M1843.24,403.76a8.74,8.74,0,0,0-1.56,3.14,8.58,8.58,0,0,0-.16,3.17c.05.37.13.71.21,1.06a8.08,8.08,0,0,0,3.8,4.7,9.35,9.35,0,0,0,2.24.71,7.24,7.24,0,0,0,3.88-.61,9.52,9.52,0,0,0,1-.58c.21-.16.4-.34.61-.5a6.28,6.28,0,0,0,1.37-2,7,7,0,0,0,.45-1.61,5.25,5.25,0,0,0-1.85-4.7,4.22,4.22,0,0,0-4.89-.4,4.35,4.35,0,0,0-.9.79,4.67,4.67,0,0,0-.4.61,3.74,3.74,0,0,0-.32,1.11,2.84,2.84,0,0,0,.26,1.48,2.37,2.37,0,0,0,1.24,1.14,1.6,1.6,0,0,0,1.66-.34.9.9,0,0,0,.24-.5,1.51,1.51,0,0,0-.05-.37c0-.08-.08-.18-.16-.21-.34-.13-.84-.11-.84-.63a1.07,1.07,0,0,1,.82-1l.4-.08a2.68,2.68,0,0,1,.87.18l.42.26a2.15,2.15,0,0,1,.61.77c.08.18.13.34.21.53a3,3,0,0,1-.61,2.67,4.5,4.5,0,0,1-1.08.92,4.11,4.11,0,0,1-4.22-.16,6.3,6.3,0,0,1-1.27-1.11,3.78,3.78,0,0,1-.34-.55,5.66,5.66,0,0,1,2.3-7.84,8.06,8.06,0,0,1,1.66-.66,6.84,6.84,0,0,1,2.64-.11,7,7,0,0,1,2.85,1.11,6.91,6.91,0,0,1,1.48,1.27,7.49,7.49,0,0,1,1.43,2.37,8.27,8.27,0,0,1-1.56,8.32c-.32.32-.58.63-.92.92a9.24,9.24,0,0,1-7.92,2,10.1,10.1,0,0,1-4.3-2.08l-.27-.21a10.08,10.08,0,1,0,14.07-14.42,9.36,9.36,0,0,0-13.06,1.43Zm0,0" transform="translate(-1837.84 -395.55)" />            <path style="fill: #ff6687;" d="M1842.5,417a10.11,10.11,0,0,0,4.3,2.08,9.26,9.26,0,0,0,7.92-2c.34-.29.61-.61.92-.92a8.07,8.07,0,0,0,1.08-1.56,8.28,8.28,0,0,0,.47-6.76,7.45,7.45,0,0,0-1.43-2.37,7.45,7.45,0,0,0-4.33-2.38,6.84,6.84,0,0,0-2.64.11,8.06,8.06,0,0,0-1.66.66,5.66,5.66,0,0,0-2.3,7.84,3.78,3.78,0,0,0,.34.55,6.31,6.31,0,0,0,1.27,1.11,4.12,4.12,0,0,0,4.22.16,4.51,4.51,0,0,0,1.08-.92,3,3,0,0,0,.61-2.67c-.08-.18-.13-.34-.21-.53a2.22,2.22,0,0,0-.61-.77l-.42-.26a2.51,2.51,0,0,0-.87-.18l-.4.08a1.08,1.08,0,0,0-.82,1c0,.53.5.5.84.63a.34.34,0,0,1,.16.21,1.51,1.51,0,0,1,.05.37.9.9,0,0,1-.24.5,1.59,1.59,0,0,1-1.66.34,2.36,2.36,0,0,1-1.24-1.14,2.87,2.87,0,0,1-.26-1.48,3.85,3.85,0,0,1,.32-1.11,4.69,4.69,0,0,1,.4-.61,4.27,4.27,0,0,1,.9-.79,4.22,4.22,0,0,1,4.89.4,5.26,5.26,0,0,1,1.85,4.7,7,7,0,0,1-.45,1.61,6.27,6.27,0,0,1-1.37,2c-.21.16-.4.34-.61.5a8.91,8.91,0,0,1-1,.58,7.24,7.24,0,0,1-3.88.61,9.3,9.3,0,0,1-2.24-.71,7.78,7.78,0,0,1-1.48-1.06,7.31,7.31,0,0,1-2.32-3.64c-.08-.34-.16-.69-.21-1.06a8.51,8.51,0,0,1,.16-3.17,8.74,8.74,0,0,1,1.56-3.14,9.38,9.38,0,0,1,13.07-1.43,10.08,10.08,0,0,0-14.07,14.41,2.09,2.09,0,0,0,.26.22Zm0,0" transform="translate(-1837.84 -395.55)" />            <circle style="stroke-width: 2px;stroke: url(#transition-2);" cx="11.7" cy="14.25" r="10.7" />        </svg>    ',"menu-info":'        <svg viewBox="0 0 20 16">            <path d="M1918,419.11h-8.38a2,2,0,0,1-2-2v-11a2,2,0,0,1,2-2H1918a2,2,0,0,0-2,2v11A2,2,0,0,0,1918,419.11Z" transform="translate(-1907 -404)" style="fill:#currentColor;opacity:0.1" />            <rect x="1" y="1" width="18" height="14" rx="2" ry="2" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <circle cx="6" cy="6" r="1.5" style="fill:none;stroke:#currentColor;stroke-miterlimit:10" />            <line x1="10.5" y1="4.5" x2="15.5" y2="4.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="10.5" y1="7.5" x2="15.5" y2="7.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="4.5" y1="10.5" x2="15.5" y2="10.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />        </svg>    ',"menu-ticket":'        <svg viewBox="0 0 16 19">            <path d="M1925,380h0a2,2,0,0,1,2,2v12a2,2,0,0,1-2,2h-10a2,2,0,0,1-2-2V382a2,2,0,0,1,2-2h0" transform="translate(-1912 -378)" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <path d="M1921,396h-6a2,2,0,0,1-2-2V382a2,2,0,0,1,2-2h6a2,2,0,0,0-2,2v12A2,2,0,0,0,1921,396Z" transform="translate(-1912 -378)" style="fill:#currentColor;opacity:0.1" />            <line x1="6" y1="1" x2="10" y2="1" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <line x1="4.5" y1="6.5" x2="5.5" y2="6.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="4.5" y1="9.5" x2="5.5" y2="9.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="4.5" y1="12.5" x2="5.5" y2="12.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="7.5" y1="6.5" x2="11.5" y2="6.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="7.5" y1="9.5" x2="11.5" y2="9.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="7.5" y1="12.5" x2="11.5" y2="12.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />        </svg>    ',"menu-invoice":'        <svg viewBox="0 0 20.3 13.98">            <path d="M2066.62,413a3.33,3.33,0,0,0,3.33,3.33V419h-18.3v-2.67a3.33,3.33,0,0,0,.42-6.58.5.5,0,0,1-.42-.48V407h18.3v2.66A3.33,3.33,0,0,0,2066.62,413Z" transform="translate(-2050.64 -406.01)" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <path d="M2060.75,413a3.33,3.33,0,0,1-3.1,3.32V419h-6v-2.67a3.33,3.33,0,0,0,.42-6.58.5.5,0,0,1-.42-.48V407h6v2.25a.5.5,0,0,0,.42.48A3.33,3.33,0,0,1,2060.75,413Z" transform="translate(-2050.64 -406.01)" style="fill:#currentColor;opacity:0.1" />            <polyline points="8.38 4.15 10.04 6.5 11.92 4.15" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="10.04" y1="6.5" x2="10.04" y2="9.83" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="8.38" y1="6.5" x2="11.71" y2="6.5" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="8.38" y1="8.17" x2="11.71" y2="8.17" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />        </svg>    ',"menu-password":'        <svg viewBox="0 0 20.12 19.85">            <circle cx="8" cy="8" r="7" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <path d="M1963.5,392.27a7,7,0,1,1,0-12.62,7,7,0,0,0,0,12.62Z" transform="translate(-1952.47 -377.96)" style="fill:#currentColor;opacity:0.1" />            <path d="M1956.68,385.19a3.22,3.22,0,0,1,2.59-2.68" transform="translate(-1952.47 -377.96)" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />            <line x1="18.49" y1="18.85" x2="12.87" y2="13.22" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <line x1="17.13" y1="17.15" x2="19.12" y2="15.15" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <line x1="15.1" y1="15.12" x2="16.34" y2="13.87" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />        </svg>    ',"menu-settings":'        <svg viewBox="0 0 21.36 21">            <path d="M1931.83,450a2.37,2.37,0,0,1-1.7-.64,2.39,2.39,0,0,0-3.25,0,2.35,2.35,0,0,1-1.6.64,2.39,2.39,0,0,1-2.4-2.56c0-.06,0-.11,0-.17a2.39,2.39,0,0,0-2-2.37,2.38,2.38,0,0,1-2-2.38,2.35,2.35,0,0,1,1-2,2.37,2.37,0,0,0,1-2,2.44,2.44,0,0,0-.31-1.19,2.34,2.34,0,0,1-.32-1.2,2.39,2.39,0,0,1,3.09-2.28,2.29,2.29,0,0,0,.7.1,2.39,2.39,0,0,0,2.22-1.51,2.39,2.39,0,0,1,4.45,0,2.4,2.4,0,0,0,1.1,1.23,2.37,2.37,0,0,1-1.82.18,2.39,2.39,0,0,0-3.09,2.28,2.34,2.34,0,0,0,.32,1.2,2.44,2.44,0,0,1,.31,1.19,2.37,2.37,0,0,1-1,2,2.35,2.35,0,0,0-1,2,2.38,2.38,0,0,0,2,2.38,2.39,2.39,0,0,1,2,2.37c0,.06,0,.11,0,.17A2.39,2.39,0,0,0,1931.83,450Z" transform="translate(-1917.82 -430.03)" style="fill:#currentColor;opacity:0.1" />            <path d="M1930.72,432.54h0a2.39,2.39,0,0,0,2.92,1.41h0a2.39,2.39,0,0,1,2.77,3.48h0a2.39,2.39,0,0,0,.72,3.16h0a2.39,2.39,0,0,1-1,4.33h0a2.39,2.39,0,0,0-2,2.54h0a2.39,2.39,0,0,1-4,1.93h0a2.39,2.39,0,0,0-3.24,0h0a2.39,2.39,0,0,1-4-1.93h0a2.39,2.39,0,0,0-2-2.54h0a2.39,2.39,0,0,1-1-4.33h0a2.39,2.39,0,0,0,.72-3.16h0a2.39,2.39,0,0,1,2.77-3.48h0a2.39,2.39,0,0,0,2.92-1.41h0A2.39,2.39,0,0,1,1930.72,432.54Z" transform="translate(-1917.82 -430.03)" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px" />            <circle cx="10.68" cy="10.5" r="2.28" style="fill:none;stroke:#currentColor;stroke-linecap:round;stroke-linejoin:round" />        </svg>    ',user:'		<svg viewBox="0 0 17.1 18">			<circle style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" cx="8.7" cy="6" r="5"/>			<path style="stroke-width:2;stroke-linecap:round;" d="M1,17c0,0,0.8-5.5,5.4-6.4"/>			<path style="stroke-width:2;stroke-linecap:round;" d="M13.4,12.1c0,0,2.3,1.1,2.7,4.9"/>			<path style="stroke-linecap:round;stroke-linejoin:round;" d="M7.7,3.6c0,0-1.7,0.6-1.7,2.9"/>		</svg>    ',exit:'		<svg viewBox="0 0 16 17">			<path style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" d="M11,16H3c-1.1,0-2-0.9-2-1.9V2.9C1,1.9,1.9,1,3,1h8"/>			<line style="stroke-linecap:round;stroke-linejoin:round;" x1="5.5" y1="8.5" x2="15.5" y2="8.5"/>			<line style="stroke-linecap:round;stroke-linejoin:round;" x1="12.5" y1="5.5" x2="15.5" y2="8.5"/>			<line style="stroke-linecap:round;stroke-linejoin:round;" x1="12.5" y1="11.5" x2="15.5" y2="8.5"/>		</svg>	',videos:'		<svg viewBox="0 0 18 14">			<path style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" d="M15,4.7l2-0.8v7.2L12,9v2c0,1.1-0.9,2-2,2H3c-1.1,0-2-0.9-2-2V3c0-1.1,0.9-2,2-2h7c1.1,0,2,0.9,2,2v2"/>			<line style="stroke-linecap:round;stroke-linejoin:round;" x1="4.5" y1="8.5" x2="4.5" y2="4.5"/>		</svg>	',photos:'		<svg viewBox="0 0 18 15">			<circle style="fill:currentColor;stroke:none;" cx="5.5" cy="5.5" r="1.5"/>			<path style="stroke-width:2;stroke-linecap:round;stroke-linejoin:round;" d="M17,8.1V12c0,1.1-0.9,2-2,2H3c-1.1,0-2-0.9-2-2V3c0-1.1,0.9-2,2-2h12c1.1,0,2,0.9,2,2"/>			<path style="stroke-linecap:round;stroke-linejoin:round;" d="M10.4,13.9H7.1L1.5,14c0-0.2,1.3-2.2,2.5-3.7c0.8-1,2.3-1.1,3.1-0.1l1.2,1.4L10.4,13.9z"/>			<path style="stroke-linecap:round;stroke-linejoin:round;" d="M16,13.9L7.1,14c0,0,0,0,0-0.1h3.3l-2.1-2.4c0.6-1.2,1.4-2.6,2.1-3.8c0.6-1.1,2.1-1,2.7,0.1L16,13.9z"/>		</svg>	',file:'		<svg viewBox="0 0 24.4 22.7">			<style type="text/css">				.st0{stroke-width:1.2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}			</style>			<path id="XMLID_28_" class="st0" d="M1.8,6.4v-2C1.8,3.6,2.3,3,3,3l0,0h9.2c0,0,1.2-2.4,2.4-2.4h6.9c0.6,0,1,0.6,1,1.4v6.2"/>			<path id="XMLID_30_" class="st0" d="M22.6,8.6H12.1c0,0-1.2-2.2-2.4-2.2h-8c-0.6,0-1.1,0.5-1.1,1.1L1.7,21c0,0.6,0.5,1.1,1.2,1.1h18.6c0.7,0,1.2-0.5,1.2-1.1l1.1-11.2C23.8,9.2,23.2,8.6,22.6,8.6z"/>		</svg>    ',freeorder:'        <svg viewBox="0 0 31 27">            <style type="text/css">                .st0{clip-path:url(#SVGID_2_);fill:#ACD362;}                .st1{clip-path:url(#SVGID_2_);fill:#FFFFFF;}                .st2{clip-path:url(#SVGID_2_);fill:none;stroke:#CBEA86;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;}            </style>            <g>                <defs>                    <rect id="SVGID_1_" x="0" y="0" width="31" height="26.7"/>                </defs>                <clipPath id="SVGID_2_">                    <use xlink:href="#SVGID_1_"  style="overflow:visible;"/>                </clipPath>                <path class="st0" d="M29.5,13.1L12.6,4.6c-0.5-0.2-1-0.3-1.5-0.3c-0.3,0-0.5,0-0.8,0.1L3.8,6.7c-0.5,0.2-1,0.6-1.3,1.1,C2.2,8.2,2.1,8.8,2.2,9.4c0,0.1,0.1,0.2,0.1,0.3l2.2,6.7c0.1,0.3,0.3,0.7,0.6,0.9c0.2,0.3,0.5,0.5,0.9,0.7l16.9,8.5,c1.3,0.7,2.9,0.1,3.6-1.2l4.3-8.6c0.3-0.5,0.3-1.1,0.2-1.7C30.8,14.2,30.3,13.5,29.5,13.1"/>                <path class="st1" d="M9.3,10.2c0.1,0.4,0,0.9-0.2,1.3c-0.5,1-1.7,1.4-2.7,0.9c-0.6-0.3-1-0.8-1.1-1.5c-0.1-0.4,0-0.9,0.2-1.3,c0.2-0.5,0.7-0.8,1.2-1c0.5-0.2,1.1-0.1,1.5,0.1c0.5,0.3,0.9,0.7,1,1.3C9.2,10.1,9.3,10.2,9.3,10.2"/>                <path class="st2" d="M5.5,9.7c0,0-3.5-1.6-4.2-3.5C0.3,3.8,2.1-0.4,7.7,1.4c1.9,0.6,7.9,4.7,9.5,2.1"/>                <path class="st1" d="M12,9.5c0.1-0.3,0.5-0.4,0.7-0.2l3.2,1.6c0.2,0.1,0.3,0.4,0.2,0.7c-0.1,0.2-0.4,0.3-0.7,0.2l-2.7-1.3L12,11.8,l2.4,1.2c0.2,0.1,0.3,0.4,0.2,0.7c-0.1,0.2-0.4,0.3-0.7,0.2l-2.4-1.2l-0.9,1.8c-0.1,0.3-0.4,0.4-0.7,0.2c-0.3-0.1-0.4-0.5-0.3-0.7,L12,9.5z"/>                <path class="st1" d="M16.3,13.3c0.1-0.3,0.4-0.4,0.7-0.2c0.3,0.1,0.4,0.4,0.2,0.7l-0.2,0.4c0.5-0.4,1.1-0.6,1.5-0.4,c0.3,0.1,0.4,0.4,0.2,0.7c-0.1,0.3-0.4,0.3-0.6,0.3c-0.7-0.2-1.4,0.1-1.9,1.1L15.7,17c-0.1,0.3-0.4,0.4-0.7,0.2,c-0.3-0.1-0.4-0.4-0.2-0.7L16.3,13.3z"/>                <path class="st1" d="M19.5,19.5c-1.2-0.6-1.7-1.9-1.1-3.2l0,0c0.6-1.2,1.9-1.7,3.1-1.2c1.3,0.6,1.4,2,1,3c-0.1,0.3-0.4,0.4-0.7,0.2,l-2.6-1.3c-0.2,0.7,0.1,1.3,0.7,1.6c0.4,0.2,0.8,0.2,1.2,0.1c0.1,0,0.2,0,0.3,0c0.2,0.1,0.3,0.4,0.2,0.6c-0.1,0.1-0.2,0.2-0.3,0.2,C20.7,19.9,20.1,19.8,19.5,19.5 M21.6,17.5c0.2-0.6,0.1-1.3-0.5-1.6c-0.6-0.3-1.2,0-1.6,0.6L21.6,17.5z"/>                <path class="st1" d="M24.2,21.8c-1.2-0.6-1.7-1.9-1.1-3.2l0,0c0.6-1.2,1.9-1.7,3.1-1.2c1.3,0.6,1.4,2,1,3c-0.1,0.3-0.4,0.4-0.7,0.2,l-2.6-1.3c-0.2,0.7,0.1,1.3,0.7,1.6c0.4,0.2,0.8,0.2,1.2,0.1c0.1,0,0.2,0,0.3,0c0.2,0.1,0.3,0.4,0.2,0.6c-0.1,0.1-0.2,0.2-0.3,0.2,C25.4,22.2,24.8,22.2,24.2,21.8 M26.3,19.9c0.2-0.6,0.1-1.3-0.5-1.6c-0.6-0.3-1.2,0-1.6,0.6L26.3,19.9z"/>                <path class="st1" d="M25,24.3c0-0.3-0.3-0.5-0.6-0.3l-0.2,0.4c0,0.1-0.2,0.1-0.2,0.1l-3.4-1.7c-0.1,0-0.1,0-0.2,0,c-0.1,0-0.2,0.2-0.2,0.3c0,0.1,0.1,0.2,0.1,0.2l3.4,1.7c0.4,0.2,0.9,0.3,1-0.1C24.8,24.8,25,24.5,25,24.3"/>            </g>        </svg>    '})}($),function(a){var b=this,c=apower,d=c.tr;apower.license={productId:"",productName:"",available:!0,returnUrl:"",info:null,appInfo:null,guid:null,accountPost:a.req.overwrite(function(a,b){var c=apower,d=c.user,e=c.lang,f=(c.license,apower.getSupportDomain()+"/api/account?format=json&action="+a);return b.data=b.data||{},b.withCredentials=!0,"object"===_typeof(b.data)&&(b.data.language=e),d.identityToken?b.data.identity_token=d.identityToken:d.info&&d.info.identity_token&&(b.data.identity_token=d.info.identity_token),{url:f,options:b}},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function c(a,d){var e=a.ok,f=a.data;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{ok:e,data:f});case 1:case"end":return a.stop()}},c,b)}));return function(b,c){return a.apply(this,arguments)}}()).post,buyPost:a.req.overwrite(function(a,b){var c=apower,d=c.user,e=c.lang,f=(c.license,apower.getSupportDomain()+"/api/buy/apowersoft?action="+a);return b.data=b.data||{},b.withCredentials=!0,"object"===_typeof(b.data)&&(b.data.language=e),d.identityToken?b.data.identity_token=d.identityToken:d.info&&d.info.identity_token&&(b.data.identity_token=d.info.identity_token),{url:f,options:b}},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function c(a,d){var e=a.ok,f=a.data;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{ok:e,data:f});case 1:case"end":return a.stop()}},c,b)}));return function(b,c){return a.apply(this,arguments)}}()).post,post:a.req.overwrite(function(a,b){var c=apower,d=(c.user,c.lang),e=(c.license,apower.getSupportDomain()+"/api/client?type=6&format=json&action="+a);return b.data=b.data||{},b.withCredentials=!0,"object"===_typeof(b.data)&&(b.data.language=d),{url:e,options:b}},function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function c(a,d){var e=a.ok,f=a.data;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{ok:e,data:f});case 1:case"end":return a.stop()}},c,b)}));return function(b,c){return a.apply(this,arguments)}}()).post,init:function(){var b=a.parseQuery(location.search);this.productId=b.product_id||"",this.productName=b.product_name||"",this.returnUrl=b.return_url,this.guid=b.guid||""},isOldIEVersion:function(){return!!this.returnUrl},isAvailable:function(){return!(!this.productId||!this.productName)},getRegisteredApp:function(){return this.productName||location.host},update:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function e(){var b,c,f,g,h,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b=apower,c=b.user,f=b.support,e.next=3,f.post("get-user-license-info");case 3:g=e.sent,h=g.ok,i=g.data,h?(c.info&&i&&i.user_info&&(c.info.ctoken=i.user_info.ctoken),this.set(i.license_info),"1"===i.license_info.login_times&&(apower.isFirstLogin=!0)):a.notify.alert(d("Failed to get license info@@001240"));case 7:case"end":return e.stop()}},e,this)}));return b}(),set:function(a){this.info=a},getCToken:function(){return this.info.ctoken},PRODUCT_LICENSE_TYPE_TEXT:{vol:"Personal@@001241",personal:"Personal@@001241",commercial:"Commercial@@001242"},getProductLicenseText:function(){return this.info?d(this.PRODUCT_LICENSE_TYPE_TEXT[this.info.product_license_type]||this.PRODUCT_LICENSE_TYPE_TEXT.personal):""},isFree:function(){return this.info&&"free"===this.info.product_license_type},isOfficialVersion:function(){return this.appInfo?0==this.appInfo.package_type:!0},isActivityVersion:function(){return this.appInfo?1==this.appInfo.package_type:!1},isChannelVersion:function(){return this.appInfo?2==this.appInfo.package_type:!1},isHasNoTrial:function(){return this.info?1==this.info.no_trial||this.appInfo&&this.appInfo.type.includes("ads-"):!1},isHasTrial:function(){return!this.isHasTrial()},isCanbeMulti:function(){return"lifetime"===this.getPassportLicenseType()},getMaxOnlineCount:function(){return this.info.max_online_num>1},PASSPORT_LICENSE_TYPE_text:{trial:"Trial@@001243",daily:"Daily@@001244",monthly:"Monthly@@001527",quarterly:"Quarterly@@001245",yearly:"Yearly@@001246",lifetime:"Lifetime@@001247"},getPassportLicenseText:function(){if(!this.info)return"";var a=(this.appInfo?this.appInfo.trial_days:0)||(this.isHasNoTrial()?0:3),b=(a>0?d("some_days").format(a):d("trial"),this.getPassportLicenseType());return d(this.PASSPORT_LICENSE_TYPE_text[b])},getPassportLicenseType:function(){return(this.info?this.info.passport_license_type:"trial").replace("multi-","")},isTrial:function(){return this.info&&"trial"===this.getPassportLicenseType()},isVIP:function(){return this.info&&1==this.info.is_activated&&"trial"!==this.getPassportLicenseType()},isActivated:function(){return this.info&&1==this.info.is_activated},isLifetime:function(){return"lifetime"===this.getPassportLicenseType()},WILL_EXPIRED_DAYS:{trial:3,daily:1,monthly:7,quarterly:10,yearly:15},isNearlyExpired:function(){if(!this.isVIP())return!1;var a=this.getPassportLicenseType(),b=this.getRemainingDays(),c=this.WILL_EXPIRED_DAYS[a]||3;return b>0&&c>=b?!0:!1},getRemainingDays:function(){if(!this.info)return"";this.getPassportLicenseType();return this.info.remain_days||0},isNoTimeLimitation:function(){return this.isFree()||this.isLifetime()},isExpired:function(){return this.info&&-2==this.info.is_activated;
},getExpiredDate:function(){if(!this.info)return"";var a=this.getPassportLicenseType();if("lifetime"===a)return d("Lifetime@@001247");var b=this.info.expire_date||(this.appInfo?this.appInfo.expire_date:"");return b.replace(/T/," ").replace(/\.000/,"").replace(/-/g,"/")},isLocalActivated:function(){return!apower.user.getId()&&this.isActivated()},getUnlimitedVipInfo:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h,i;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=apower,c=b.user,e=b.support,d.next=3,e.post("get-user-license-info",{product_name:"Online Unlimited"});case 3:f=d.sent,g=f.ok,h=f.data,i=f.status,a.store.set("unlimited_vip_info",h.license_info);case 8:case"end":return d.stop()}},d,this)}));return b}()},apower.license.init()}($),function(a){var b=apower,c=b.tr;apower.user={__proto__:a.Emitter.prototype,origin:"https://passport.aoscdn.com",req:a.req.overwrite(function(b,c){var d=apower,e=d.lang,f=d.user,g=a.parseQuery(b);if(b=f.origin+b.substring(0,-1===b.indexOf("?")?b.length:b.indexOf("?")),c.data=Object.assign({},g,c.data),"object"===_typeof(c.data)){c.data.brand=f.getBrand(),c.data.language=e,c.password&&(c.data.password=c.password);var h=Object.keys(c.data);if(h.length>0){h.sort();for(var i={},j="",k=0;k<h.length;k++)i[h[k]]=c.data[h[k]],j+=k<h.length-1?h[k]+"="+i[h[k]]+"&":h[k]+"="+i[h[k]];c.data=i}}var l=f.apiToken||f.info&&f.info.api_token;return l&&!b.endsWith("/api/sessions")&&(c.headers={Authorization:"Bearer "+l}),{url:b,options:c}},function(a){var b=a.ok,c=a.data,d=c&&c.status?c.status:null;return c=c&&c.data?c.data:c,{ok:b,data:c,status:d}}),inMyAccountDomain:location.host.startsWith("myaccount")||location.host.startsWith("dev050"),inSoftware:!1,brand:null,info:null,token:null,license:null,bindings:null,syncLoginState:null,syncLogoutState:null,triggerEvent:function(a){window.dispatchEvent(a)},init:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:a.Emitter.call(this),this.info=a.store.get("account_user"),this.apiToken=a.store.get("account_api_token"),this.identityToken=a.store.get("account_id_token"),b=apower,c=b.user,e=c.apiToken||c.info&&c.info.api_token,!this.info&&e&&apower.user.req.get("/api/my/info").then(function(a){var b=a.ok,c=a.data,d=a.status;b&&(c&&(c.user_id||c.uid)?f.set({user:c}):-213==d&&f.popupLoginWin())}),a.onReady(function(){a.defer(function(){f.willHandleThirdParty()&&f.handleThirdPartyCallback(),f.willHandleAutoLogin()&&f.handleAutoLogin()})});case 8:case"end":return d.stop()}},d,this)}));return b}(),getBrand:function(){return location.host.includes("acethinker")&&(this.brand="Acethinker"),this.brand||"Apowersoft"},getId:function(){return this.info?this.info.user_id||this.info.uid:""},getName:function(){return this.info?this.info.nickname||this.info.email.replace(/@.+/,""):c("Anonymous@@001248")},getAvatar:function(){return this.info?this.info.avatar?this.info.avatar:this.info.avatar_url:""},isLogined:function(){return this.getId()>0},isFirstTimeLogin:function(){return this.info&&"0"==this.info.last_login_time},isBinded:function(){return this.info.telephone||this.info.email},isAnonymous:function(){return this.info&&this.info.email&&this.info.email.endsWith("@anonymous.com")},addTokenToURL:function(b){if(!b)return"";var c=this.getToken();return c?a.useQuery(b,{identity_token:c}):b},getToken:function(){return this.identityToken||(this.info?this.info.identity_token:null)},modify:function(){function b(a){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(b){var c,e,f,g,h,i;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return c=this.getId(),e=a.extend({},this.info),Object.assign(this.info,b),a.digest(),d.next=6,this.req.put("/api/users/"+c,b);case 6:return f=d.sent,g=f.ok,h=f.data,i=f.status,g?(h&&(this.info=h),a.store.set("account_user",this.info),window.Cookies&&this.info.identity_token&&Cookies.set("X_USER_IDENTITY_TOKEN",this.info.identity_token),this.trigger("modify",this.info)):this.info=e,d.abrupt("return",{ok:g,status:i});case 12:case"end":return d.stop()}},d,this)}));return b}(),set:function(){function b(a){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(b){var c,e,f=b.user,g=b.api_token,h=b.identity_token;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=this.isLogined(),f&&(this.info=f),g&&(this.apiToken=g),h&&(this.identityToken=h,this.bindings=null,this.info&&(this.info.identity_token=h)),a.store.set("account_user",this.info),window.Cookies&&this.info.identity_token&&Cookies.set("X_USER_IDENTITY_TOKEN",this.info.identity_token),a.store.set("account_api_token",this.apiToken),a.store.set("account_id_token",this.identityToken),!(this.isLogined()&&!c||h)){b.next=15;break}if(!this.syncLoginState){b.next=12;break}return b.next=12,this.syncLoginState();case 12:this.trigger("logined");try{e=document.createEvent("Event"),e.initEvent("wx_user_login",!0,!0),this.triggerEvent(e)}catch(d){console.log(d)}this.isBinded()&&this.trigger("logincompleted");case 15:case"end":return b.stop()}},d,this)}));return b}(),changeAvatar:function(){function b(a){return d.apply(this,arguments)}var d=_asyncToGenerator(regeneratorRuntime.mark(function e(b){var d,f,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,apower.uploadAvatar(b);case 2:if(d=e.sent,!d){e.next=16;break}return e.next=6,apower.user.modify({avatar:d});case 6:if(f=e.sent,g=f.ok,!g){e.next=12;break}return e.abrupt("return",{ok:!0});case 12:return a.notify.alert(c("Failed to change avatar!@@001249")),e.abrupt("return",{ok:!1});case 14:e.next=18;break;case 16:return a.notify.alert(c("Failed to upload avatar!@@001250")),e.abrupt("return",{ok:!1});case 18:case"end":return e.stop()}},e,this)}));return b}(),loginByPost:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.identity_token&&(a.identity_token=a.identity_token.replace(/%2c/gi,",")),apower.app&&"software"===apower.app.env&&InvokeApp("get-passport-info",{},function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function c(b){var d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a.registed_app=b.data.app_info.name,c.next=3,this.req.post("/api/sessions",a);case 3:return d=c.sent,e=d.ok,f=d.data,g=d.status,e&&this.set(f),c.abrupt("return",{ok:e,status:g});case 9:case"end":return c.stop()}},c,this)}));return function(a){return b.apply(this,arguments)}}()),c.next=4,this.req.post("/api/sessions",a);case 4:return b=c.sent,d=b.ok,e=b.data,f=b.status,d&&this.set(e),c.abrupt("return",{ok:d,status:f});case 10:case"end":return c.stop()}},c,this)}));return a}(),willHandleThirdParty:function(){var b=a.parseQuery(location.search);return b.unique_id&&b.provider},handleThirdPartyCallback:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(b=apower,c=b.route,e=a.parseQuery(location.search),c&&(c.loading=!0),"binding"!==e.action){d.next=8;break}return d.next=6,this.bindWithThirdParty();case 6:d.next=11;break;case 8:if("login"!==e.action){d.next=11;break}return d.next=11,this.loginWithThirdParty();case 11:c&&(c.loading=!1);case 12:case"end":return d.stop()}},d,this)}));return b}(),bindWithThirdParty:function(){function b(){return d.apply(this,arguments)}var d=_asyncToGenerator(regeneratorRuntime.mark(function e(){var b,d,f,g,h,i,j,k,l,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b=apower,d=b.route,f=b.license,g=a.parseQuery(location.search),h=this.getId(),i={},i.unique_id=g.unique_id,i.provider=g.provider,i.registed_app=f.getRegisteredApp(),this.inMyAccountDomain&&d["goto"]("/"),e.next=10,this.req.put("/api/users/"+h+"/bindings/oauth",i);case 10:j=e.sent,k=j.ok,l=j.data,m=j.status,k||-204==m?(a.notify.success(c("{0} account binded!@@001251",this.getBindingProviderName(g.provider))),this.readBindings()):-205==m?a.notify.alert(c("The {0} account has binded to another account!@@001383",this.getBindingProviderName(g.provider))):a.notify.alert(c("Failed to bind to third party accounts!@@001252"));case 15:case"end":return e.stop()}},e,this)}));return b}(),loginWithThirdParty:function(){function b(){return d.apply(this,arguments)}var d=_asyncToGenerator(regeneratorRuntime.mark(function e(){var b,d,f,g,h,i,j;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b=apower,d=b.license,f=a.parseQuery(location.search),g={},a.store.set("account_user",null),window.Cookies&&Cookies.remove("X_USER_IDENTITY_TOKEN"),a.store.set("account_api_token",null),a.store.set("account_id_token",null),this.info=a.store.get("account_user"),this.apiToken=a.store.get("account_api_token"),this.identityToken=a.store.get("account_id_token"),g.unique_id=f.unique_id,g.provider=f.provider,g.registed_app=d.getRegisteredApp(),e.next=15,this.loginByPost(g);case 15:h=e.sent,i=h.ok,j=h.status,i?this.onAfterThirdPartyLogin():a.notify.alert(c("Failed to login with third party accounts!@@001253"));case 19:case"end":return e.stop()}},e,this)}));return b}(),onAfterThirdPartyLogin:function(){var b=apower,c=b.route,d=(b.license,a.parseQuery(location.search));if(this.inMyAccountDomain)apower.app.isFromSoftware?"software"===apower.app.env?this.isBinded()?c["goto"]("/congrats-logined"+location.search):c["goto"]("/binding"+location.search):c.isInSoftware?apower.app.returnToSoftware("third-party-login-from-software"):apower.app.returnToSoftware("third-party-login-from-web"):this.isBinded()?c["goto"]("/"+location.search):c["goto"]("/binding"+location.search);else{var e=location.href.replace(/&?(?:unique_id|provider)=(?:[^&])+/g,"");history.replaceState(null,null,e),this.isBinded()||a.newComponent("binding",{query:d}).show()}},onAfterBindingContact:function(){this.trigger("logincompleted")},willHandleAutoLogin:function(){var b=apower,c=b.route,d=a.parseQuery(location.search);return c?(d.identity_token||d.uid&&(d.ctoken||d.sylogin_hash))&&"/congrats-registered"!==c.path&&"/congrats-logined"!==c.path&&"/congrats-activated"!==c.path&&"/binding"!==c.path:d.identity_token||d.uid&&(d.ctoken||d.sylogin_hash)},handleAutoLogin:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f,g,h,i,j,k,l,m,n,o;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b=apower,c=b.route,e=a.parseQuery(location.search),f=e.identity_token,g=e.token,h=e.uid,i=e.ctoken,j=e.sylogin_hash,f=f?f:g,d.next=5,this.loginByPost({identity_token:f,uid:h,ctoken:i,sylogin_hash:j});case 5:k=d.sent,l=k.ok,m=k.status,c&&"/change-password"===c.path||(this.inMyAccountDomain?location.pathname.indexOf("/token")>-1?(n=location.href.replace(/&?(?:identity_token|uid|ctoken|sylogin_hash)=(?:[^&])+/g,""),n=n.replace(/\?$/,""),history.replaceState(null,null,n)):c["goto"]("/"):(o=location.href.replace(/&?(?:identity_token|uid|ctoken|sylogin_hash)=(?:[^&])+/g,""),o=o.replace(/\?&/,"?"),history.replaceState(null,null,o)));case 9:case"end":return d.stop()}},d,this)}));return b}(),readBindings:function(){function a(){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(){var a,b,d,e,f;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=this.getId(),c.next=3,this.req.get("/api/users/"+a+"/bindings/oauth");case 3:return b=c.sent,d=b.ok,e=b.data,f=b.status,d&&(this.bindings=e),c.abrupt("return",{ok:d,status:f});case 9:case"end":return c.stop()}},c,this)}));return a}(),getBinding:function(a){return this.bindings?this.bindings.find(function(b){return b.provider===a}):null},getBindingProviderName:function(a){var b={qq:"QQ",weixin:"微信",weibo:"微博",dingtalk:"钉钉"};return b[a]||a.slice(0,1).toUpperCase()+a.slice(1)},bindThirdParty:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=this.getId(),c.next=3,this.req.put("/api/users/"+b+"/bindings/oauth",a);case 3:return d=c.sent,e=d.ok,f=d.data,g=d.status,c.abrupt("return",{ok:e,status:g});case 9:case"end":return c.stop()}},c,this)}));return a}(),bindContact:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=this.getId(),c.next=3,this.req.put("/api/users/"+b+"/bindings/contactinfo",a);case 3:return d=c.sent,e=d.ok,f=d.data,g=d.status,e&&f&&this.set({user:f}),c.abrupt("return",{ok:e,status:g});case 9:case"end":return c.stop()}},c,this)}));return a}(),changePassword:function(){function a(a){return b.apply(this,arguments)}var b=_asyncToGenerator(regeneratorRuntime.mark(function c(a){var b,d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=this.getId(),c.next=3,this.req.put("/api/users/"+b+"/passwords",a);case 3:return d=c.sent,e=d.ok,f=d.data,g=d.status,e&&this.set(f),c.abrupt("return",{ok:e,status:g});case 9:case"end":return c.stop()}},c,this)}));return a}(),logout:function(){function b(){return c.apply(this,arguments)}var c=_asyncToGenerator(regeneratorRuntime.mark(function d(){var b,c,e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(b=apower,c=b.route,e=this.getToken(),this.info=null,this.apiToken="",this.identityToken="",this.bindings=null,a.store.remove("account_user"),window.Cookies&&Cookies.remove("X_USER_IDENTITY_TOKEN"),a.store.remove("account_api_token"),a.store.remove("account_id_token"),a.store.remove("lightmvAccountInfo"),a.store.remove("lightmvVipInfo"),c&&c.clearAllCache(),c&&this.inMyAccountDomain&&c["goto"]("/login"),!this.syncLogoutState){d.next=17;break}return d.next=17,this.syncLogoutState(e);case 17:this.trigger("logout");try{f=document.createEvent("Event"),f.initEvent("wx_user_logout",!0,!0),this.triggerEvent(f)}catch(g){console.log(g)}case 19:case"end":return d.stop()}},d,this)}));return b}(),popupLoginWin:function(b){var c=this;return new Promise(function(d){a("[is=login]").length||a.newComponent("login",{onShow:function(){c.trigger("showLoginWin")},onHide:function(){c.trigger("hideLoginWin")}}).show(),apower.user.once("logined",function(){b&&b(),d()})})}},apower.user.init()}($);